(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1e18cf52"],{"0e8e":function(e,t,a){"use strict";var i=a("510e");a.n(i).a},1331:function(e,t,a){},"2b77":function(e,t,a){},3073:function(e,t,a){"use strict";a.r(t),a("96cf");var i=a("3b8d"),l=a("d225"),n=a("b0b4"),o=a("b775"),r=function(){function e(){Object(l.a)(this,e)}return Object(n.a)(e,null,[{key:"initTree",value:function(){return Object(o.a)({url:"/px-common-dragpage/treeManage/treeInit",method:"post"})}},{key:"addFolderJs",value:function(e){return Object(o.a)({url:"/px-common-dragpage/treeManage/addFolder",method:"post",data:e})}},{key:"addPageJs",value:function(e){return Object(o.a)({url:"/px-common-dragpage/treeManage/addPage",method:"post",data:e})}},{key:"deleteFolderJs",value:function(e){return Object(o.a)({url:"/px-common-dragpage/treeManage/deleteFolder",method:"post",data:e})}},{key:"queryFolderInfo",value:function(e){return Object(o.a)({url:"/px-common-dragpage/treeManage/queryFolder",method:"post",data:e})}},{key:"queryPageInfo",value:function(e){return Object(o.a)({url:"/px-common-dragpage/treeManage/queryPage",method:"post",data:e})}},{key:"deletePageJs",value:function(e){return Object(o.a)({url:"/px-common-dragpage/treeManage/deletePage",method:"post",data:e})}}]),e}(),s={name:"PageForm",props:["nodeInfo"],data:function(){return{activeName:"userManage",pageInfo:{pageName:"",pageDesc:"",createTime:"",updateTime:"",userName:"",pageId:""},readonlyFlag:!0}},mounted:function(){this.initPageInfo(this.nodeInfo)},methods:{initPageInfo:function(e){var t=this,a={pageId:e};r.queryPageInfo(a).then(function(e){0===e.status&&(t.pageInfo=e.data)})}},watch:{nodeInfo:function(e){this.initPageInfo(this.nodeInfo)}}},d=(a("6bb7"),a("2877")),c=Object(d.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("el-tabs",{staticStyle:{height:"500px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"userManage"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),e._v(" 用户管理")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.pageInfo,"label-position":"right"}},[a("el-form-item",{attrs:{label:"页面名称"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.pageInfo.pageName,callback:function(t){e.$set(e.pageInfo,"pageName",t)},expression:"pageInfo.pageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述描述"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",clearable:""},model:{value:e.pageInfo.pageDesc,callback:function(t){e.$set(e.pageInfo,"pageDesc",t)},expression:"pageInfo.pageDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择日期时间",readonly:e.readonlyFlag,clearable:""},model:{value:e.pageInfo.createTime,callback:function(t){e.$set(e.pageInfo,"createTime",t)},expression:"pageInfo.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"修改日期"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择日期时间",readonly:e.readonlyFlag,clearable:""},model:{value:e.pageInfo.updateTime,callback:function(t){e.$set(e.pageInfo,"updateTime",t)},expression:"pageInfo.updateTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建用户"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readonly:e.readonlyFlag},model:{value:e.pageInfo.userName,callback:function(t){e.$set(e.pageInfo,"userName",t)},expression:"pageInfo.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"页面的ID"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readonly:e.readonlyFlag},model:{value:e.pageInfo.pageId,callback:function(t){e.$set(e.pageInfo,"pageId",t)},expression:"pageInfo.pageId"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),e._v(" 版本管理")]),e._v("\n        版本管理\n      ")])],1)],1)],1)},[],!1,null,"4aa1a00a",null).exports,f={name:"FolderForm",props:["nodeInfo"],data:function(){return{folderInfo:{folderName:"",folderDesc:"",createTime:"",updateTime:"",userId:"",folderId:""},readonlyFlag:!0}},mounted:function(){this.initFolderInfo(this.nodeInfo)},methods:{initFolderInfo:function(e){var t=this,a={folderId:e};r.queryFolderInfo(a).then(function(e){0===e.status&&(t.folderInfo=e.data)})}},watch:{nodeInfo:function(e){this.initFolderInfo(this.nodeInfo)}}},u=(a("0e8e"),{name:"TreeMain",props:["viewName","viewInfo"],data:function(){return{data:[],tabView:"",nodeInfo:""}},mounted:function(){this.tabView=this.viewName,this.nodeInfo=this.viewInfo},watch:{viewName:function(e){this.tabView=this.viewName},viewInfo:function(e){this.nodeInfo=this.viewInfo}},components:{page:c,folder:Object(d.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("div",{staticStyle:{background:"#ffffff",width:"100%",height:"600px",position:"relative"}},[a("span",{staticStyle:{position:"absolute",top:"10%",left:"44%",transform:"translate(-50%,-50%)","font-size":"16px","font-weight":"bold"}},[e._v("详细信息")]),e._v(" "),a("el-form",{ref:"form",staticStyle:{position:"absolute",top:"45%",left:"40%",transform:"translate(-50%,-50%)"},attrs:{model:e.folderInfo,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"文件夹名称"}},[a("el-input",{attrs:{clearable:""},model:{value:e.folderInfo.folderName,callback:function(t){e.$set(e.folderInfo,"folderName",t)},expression:"folderInfo.folderName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件夹描述"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.folderInfo.folderDesc,callback:function(t){e.$set(e.folderInfo,"folderDesc",t)},expression:"folderInfo.folderDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:e.readonlyFlag,clearable:""},model:{value:e.folderInfo.createTime,callback:function(t){e.$set(e.folderInfo,"createTime",t)},expression:"folderInfo.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"修改日期"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:e.readonlyFlag,clearable:""},model:{value:e.folderInfo.updateTime,callback:function(t){e.$set(e.folderInfo,"updateTime",t)},expression:"folderInfo.updateTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("el-input",{attrs:{readonly:""},model:{value:e.folderInfo.userId,callback:function(t){e.$set(e.folderInfo,"userId",t)},expression:"folderInfo.userId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件夹ID"}},[a("el-input",{attrs:{readonly:""},model:{value:e.folderInfo.folderId,callback:function(t){e.$set(e.folderInfo,"folderId",t)},expression:"folderInfo.folderId"}})],1)],1)],1)])],1)},[],!1,null,"f081360e",null).exports}}),p={name:"DragPage",components:{TreeMain:Object(d.a)(u,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t(this.tabView,{tag:"component",attrs:{"node-info":this.nodeInfo}})],1)},[],!1,null,"cc07e29a",null).exports},data:function(){return{data:[{id:"1",label:"电力市场",grade:"0",children:[]}],dialogAddFolder:!1,dialogAddPage:!1,dialogEditPage:!1,addFolder:{folderName:"",folderDesc:""},addPage:{pageName:"",pageDesc:""},treeProps:{id:"id",children:"children",label:"label",grade:"grade",pid:"pid"},viewName:"",viewInfo:"",filterText:"",collapseBtnClick:!1,isCollapse:!0,menuVisible:!0,menuOneVisible:!1,menuTwoVisible:!1,menuThreeVisible:!1,currentId:"",currentName:"",jsonData:{list:[],config:{labelWidth:100,labelPosition:"right",size:"small"}},editPageUrl:"",iframe:{iframeWidth:"",iframeHigh:"",iframeStyle:""},rules:{folderName:[{required:!0,message:"请输入文件夹名称",trigger:"blur"},{min:3,max:32,message:"长度在 3 到 32 个字符",trigger:"blur"}],pageName:[{required:!0,message:"请输入页面名称",trigger:"blur"},{min:3,max:32,message:"长度在 3 到 32 个字符",trigger:"blur"}]}}},mounted:function(){this.initTree(),(this.menuVisible||this.menuOneVisible||this.menuTwoVisible||this.menuThreeVisible)&&document.addEventListener("click",this.hideMenu)},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{hideMenu:function(){this.menuOneVisible=!1,this.menuTwoVisible=!1,this.menuThreeVisible=!1},folderHandleClose:function(e){e(),this.resetForm("addFolder")},pageHandleClose:function(e){e(),this.resetForm("addPage")},editPageHandleClose:function(e){this.$confirm("确定退出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(Object(i.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e();case 2:case"end":return t.stop()}},t)}))).catch(function(e){})},resetForm:function(e){this.$refs[e].resetFields()},addFolderCancel:function(){this.dialogAddFolder=!1,this.resetForm("addFolder")},addPageCancel:function(){this.dialogAddPage=!1,this.resetForm("addPage")},initTree:function(){var e=this;r.initTree().then(function(t){e.data=t.data})},handleNodeClick:function(e,t){this.viewInfo=e.id,void 0!==e.grade&&null!==e.grade&&"1"===e.grade?this.viewName="folder":void 0!==e.grade&&null!==e.grade&&"2"===e.grade&&(this.viewName="page")},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},rightClick:function(e,t,a,i){this.currentId=a.data.id,this.currentName=a.data.label;var l=null;if(this.menuVisible=!1,"0"===t.grade)this.menuOneVisible=!1,this.menuTwoVisible=!1,this.menuThreeVisible=!0,l=document.querySelector("#menuThree");else if("1"===t.grade)this.menuOneVisible=!1,this.menuTwoVisible=!0,this.menuThreeVisible=!1,l=document.querySelector("#menuTwo");else{if("2"!==t.grade)return;this.menuOneVisible=!0,this.menuTwoVisible=!1,this.menuThreeVisible=!1,l=document.querySelector("#menuOne")}l.style.left=e.clientX-207+"px",l.style.top=e.clientY-131+"px",l.style.position="absolute"},createFolder:function(){this.dialogAddFolder=!0},addFolderM:function(){var e=this,t={parentId:this.currentId,folderName:this.addFolder.folderName,folderDesc:this.addFolder.folderDesc};r.addFolderJs(t).then(function(t){0===t.status&&(e.$message({type:"success",message:"添加成功!"}),e.addFolderCancel(),e.initTree())})},createPage:function(){this.dialogAddPage=!0},addPageM:function(){var e=this,t={folderId:this.currentId,pageName:this.addPage.pageName,pageDesc:this.addPage.pageDesc,jsonData:JSON.stringify(this.jsonData)};r.addPageJs(t).then(function(t){0===t.status&&(e.$message({type:"success",message:"添加页面成功!"}),e.addPageCancel(),e.initTree())})},deleteFolder:function(){var e=this,t={folderId:this.currentId};r.deleteFolderJs(t).then(function(t){0===t.status&&(e.$message({type:"success",message:"节点删除文件夹成功!"}),e.initTree())})},editPage:function(){this.dialogEditPage=!0,this.editPageUrl="http://localhost:8080/#/";var e=document.body.scrollWidth,t=document.body.scrollHeight,a=window.screen.height,i=window.screen.width;this.iframe.iframeStyle="position:relative;top: "+.05*a+";left: "+.05*i,e<985&&(e=985),this.iframe.iframeWidth=.9*e,this.iframe.iframeHigh=.8*t;var l=this;setTimeout(function(){l.$refs.editPageIframe.contentWindow.postMessage({cmd:"showPage",params:{pageId:l.currentId,pageName:l.currentName}},"*")},1e3)},deletePage:function(){var e=this,t={pageId:this.currentId};r.deletePageJs(t).then(function(t){0===t.status&&(e.$message({type:"success",message:"节点删除文件成功!"}),e.initTree())})}}},g=(a("f26c"),Object(d.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[e.isCollapse?a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",padding:"2px 6px"}},[a("el-input",{staticStyle:{padding:"18px 0 18px 0",background:"#ffffff"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticClass:"filter-tree",staticStyle:{height:"calc(100vh - 185px)"},attrs:{props:e.treeProps,data:e.data,"node-key":"id","default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-contextmenu":e.rightClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[null!=l.grade&&null!=l.grade&&"2"==l.grade?[a("i",{staticClass:"el-icon-document"}),e._v(" "+e._s(i.label)+"\n          ")]:e._e(),e._v(" "),null==l.grade||null==l.grade||"1"!=l.grade&&"0"!=l.grade?e._e():[a("i",{staticClass:"iconfont icon-icon_workfile_line"}),e._v(" "+e._s(i.label)+"\n          ")]],2)])}}],null,!1,2041858339)}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.menuThreeVisible,expression:"menuThreeVisible"}],staticClass:"topTriangle",staticStyle:{width:"126px",height:"60px",border:"1px solid #d3d7d4",background:"#fff","z-index":"9999","border-radius":"5px"},attrs:{id:"menuThree"}},[a("ul",{staticStyle:{margin:"0",padding:"0","list-style":"none","text-align":"left"}},[a("li",{staticStyle:{margin:"0px 10px","font-size":"14px","line-height":"30px",height:"30px"},on:{click:e.createFolder}},[a("i",{staticClass:"iconfont icon-icon_workfile_line",staticStyle:{"padding-right":"10px"}}),e._v("新建文件夹")]),e._v(" "),a("li",{staticStyle:{margin:"0px 10px","font-size":"14px","line-height":"30px",height:"30px"},on:{click:e.createPage}},[a("i",{staticClass:"el-icon-document",staticStyle:{"padding-right":"10px"}}),e._v("新建页面")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.menuTwoVisible,expression:"menuTwoVisible"}],staticClass:"topTriangle",staticStyle:{width:"126px",height:"90px",border:"1px solid #d3d7d4",background:"#fff","z-index":"9999","border-radius":"5px"},attrs:{id:"menuTwo"}},[a("ul",{staticStyle:{margin:"0",padding:"0","list-style":"none","text-align":"left"}},[a("li",{staticStyle:{margin:"0px 10px","font-size":"14px","line-height":"30px",height:"30px"},on:{click:e.createFolder}},[a("i",{staticClass:"iconfont icon-icon_workfile_line",staticStyle:{"padding-right":"10px"}}),e._v("新建文件夹")]),e._v(" "),a("li",{staticStyle:{margin:"0px 10px","font-size":"14px","line-height":"30px",height:"30px"},on:{click:e.createPage}},[a("i",{staticClass:"el-icon-document",staticStyle:{"padding-right":"10px"}}),e._v("新建页面")]),e._v(" "),a("li",{staticStyle:{margin:"0px 10px","font-size":"14px","line-height":"30px",height:"30px"},on:{click:e.deleteFolder}},[a("i",{staticClass:"el-icon-delete",staticStyle:{"padding-right":"10px"}}),e._v("删除")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.menuOneVisible,expression:"menuOneVisible"}],staticClass:"topTriangle",staticStyle:{width:"126px",height:"60px",border:"1px solid #d3d7d4",background:"#fff","z-index":"9999","border-radius":"5px"},attrs:{id:"menuOne"}},[a("ul",{staticStyle:{margin:"0",padding:"0","list-style":"none","text-align":"left"}},[a("li",{staticStyle:{margin:"0px 10px","font-size":"14px","line-height":"30px",height:"30px"},on:{click:e.editPage}},[a("i",{staticClass:"el-icon-edit",staticStyle:{"padding-right":"10px"}}),e._v("编辑")]),e._v(" "),a("li",{staticStyle:{margin:"0px 10px","font-size":"14px","line-height":"30px",height:"30px"},on:{click:e.deletePage}},[a("i",{staticClass:"el-icon-delete",staticStyle:{"padding-right":"10px"}}),e._v("删除")])])])],1):e._e(),e._v(" "),a("el-container",[a("TreeMain",{staticStyle:{width:"100%"},attrs:{"view-name":e.viewName,"view-info":e.viewInfo}}),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.dialogAddFolder,top:"10%",width:"30%","before-close":e.folderHandleClose},on:{"update:visible":function(t){e.dialogAddFolder=t}}},[a("div",{staticStyle:{background:"#ffffff",width:"100%",height:"150px",position:"relative"}},[a("el-form",{ref:"addFolder",staticStyle:{position:"absolute",top:"20%",left:"40%",transform:"translate(-50%,-50%)"},attrs:{model:e.addFolder,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"文件夹名称",prop:"folderName"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入文件夹名称","validate-event":"",clearable:""},model:{value:e.addFolder.folderName,callback:function(t){e.$set(e.addFolder,"folderName",t)},expression:"addFolder.folderName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件夹描述",prop:"folderDesc"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入文件夹描述","validate-event":"",clearable:""},model:{value:e.addFolder.folderDesc,callback:function(t){e.$set(e.addFolder,"folderDesc",t)},expression:"addFolder.folderDesc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{position:"absolute",top:"70%",left:"50%",transform:"translate(-50%,-50%)"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addFolderCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addFolderM}},[e._v("确 定")])],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.dialogAddPage,top:"10%",width:"30%","before-close":e.pageHandleClose},on:{"update:visible":function(t){e.dialogAddPage=t}}},[a("div",{staticStyle:{background:"#ffffff",width:"100%",height:"150px",position:"relative"}},[a("el-form",{ref:"addPage",staticStyle:{position:"absolute",top:"20%",left:"40%",transform:"translate(-50%,-50%)"},attrs:{model:e.addPage,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"页面名称",prop:"pageName"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入页面名称","validate-event":"",clearable:""},model:{value:e.addPage.pageName,callback:function(t){e.$set(e.addPage,"pageName",t)},expression:"addPage.pageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"页面描述",prop:"pageDesc"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入页面描述","validate-event":"",clearable:""},model:{value:e.addPage.pageDesc,callback:function(t){e.$set(e.addPage,"pageDesc",t)},expression:"addPage.pageDesc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{position:"absolute",top:"70%",left:"50%",transform:"translate(-50%,-50%)"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addPageCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addPageM}},[e._v("确 定")])],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.dialogEditPage,top:"5px",width:"95%",hight:"95%","before-close":e.editPageHandleClose,align:"center"},on:{"update:visible":function(t){e.dialogEditPage=t}}},[a("iframe",{ref:"editPageIframe",style:e.iframe.iframeStyle,attrs:{src:e.editPageUrl,width:e.iframe.iframeWidth,height:e.iframe.iframeHigh,frameborder:"0"}})])],1)],1)},[],!1,null,"7a6ad888",null));t.default=g.exports},"510e":function(e,t,a){},"6bb7":function(e,t,a){"use strict";var i=a("1331");a.n(i).a},f26c:function(e,t,a){"use strict";var i=a("2b77");a.n(i).a}}]);