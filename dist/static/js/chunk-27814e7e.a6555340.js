(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27814e7e"],{"0e4f":function(e,t,a){"use strict";var n=a("4ec1"),o=a.n(n);o.a},1:function(e,t){},"1fa89":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("34ef"),core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5__),_vendor_Export2Excel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4bf8d");function UTCMiddleWare_Function(){var self=this;self.code="pRLXrMwv6PpRY1iCfNqBpoglbQ3M9KNMF81sRqyAQ0lF6QTzmbGLBunPf8waWKV9OdxAJwIMVwD4K2pCm/1D5qeZuNYxiBA0QVOqge8wTVRVBQVYvNHSmfvHvIsSGfQnK/dsRkqsF8Nf9safhGXmhrINzi1ftHQrCWNXEzmNufg=",self.version="",self.isloading=!0,self.loadingflag=null,self.usekey=!1,self.vnum=null,self.initsure=!0,self.errorstate={117440512:"（第三方错误/系统错误)",117440513:"请先启动电子钥匙辅助控件",117440514:"电子钥匙辅助控件请求超时",117440515:"电子钥匙辅助控件拒绝访问",117440516:"缺少参数或参数格式错误",117440517:"没有找到指定挂载的接口库",117440518:"参数格式错误无法解析",117440519:"无法连接外部服务",117440520:"外部服务请求超时",117440521:"外部服务拒绝访问",117440528:"取消选择印章",117440522:"钥匙中缺少公章信息",117440523:"钥匙中缺少法人章/签字信息",117440524:"没有符合筛选条件的证书",117440525:"钥匙中缺少印章信息",117440526:"请勿同时插入多把电子钥匙",50331656:"PIN码不正确",50331652:"请输入6位数PIN码"},self.AddPlugin=function(json){var pluginlist=["Inside","Evaluate","Idcard","Ui","Hidden"];function loop(num){eval("json."+pluginlist[num].toLowerCase())?self.tool.loadjs(eval("json."+pluginlist[num].toLowerCase()),function(bool){if(bool)try{eval("self."+pluginlist[num]+"=new UTCMiddleWare_"+pluginlist[num]+"()"),json.success("UTCMiddleWare."+pluginlist[num])}catch(e){json.fail("0x07000005",self.errorstate[117440517]+","+e.message)}else json.fail("0x07000005",self.errorstate[117440517]);num<pluginlist.length-1&&(num++,loop(num))}):num<pluginlist.length-1&&(num++,loop(num))}loop(0)},self.successcallback=function(e,t){"function"===typeof e.success||"function"===typeof e.finish?e.success(t):alert(t)},self.errorcallback=function(e,t,a,n){"fail"===t&&("function"!==typeof e.fail&&"function"!==typeof e.finish||e.fail(a,n)),"error"===t&&("function"!==typeof e.error&&"function"!==typeof e.finish||e.error(a,n))},self.LocalAjaxPost=function(json,callback){try{try{eval("json = '"+JSON.stringify(json)+"';")}catch(e){return callback("fail","0x07000006",self.errorstate[117440518]),!1}var url="http://127.0.0.1:58902/UTCDaemon/",shitie;if("https:"===document.location.protocol&&(url="https://daemon.utcsoft.com:58912/UTCDaemon/"),navigator.userAgent.indexOf("Trident/")>=0)shitie=window.ActiveXObject&&self.vnum<9?new ActiveXObject("Microsoft.XMLHttp"):new XMLHttpRequest,shitie.open("Get",url,!0),shitie.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),shitie.onreadystatechange=function(){4===shitie.readyState&&postfn()},shitie.send();else postfn()}catch(e){callback("fail","0x07000001",self.errorstate[117440513])}function postfn(){var e;e=window.ActiveXObject&&self.vnum<9?new ActiveXObject("Microsoft.XMLHttp"):new XMLHttpRequest,e.open("POST",url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var t=JSON.parse(e.responseText);"0"===t.code?callback("success",t.code,t.result):callback("fail",t.code,t.errormsg)}else callback("fail","0x07000001",self.errorstate[117440513])},json=json.replace(/\\/gi,"\\\\"),e.send("json="+json)}},self.WebAjaxPost=function(e,t){try{var a=e.url,n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var e=JSON.parse(n.responseText);t("success",e)}else t("fail","0x07000007",self.errorstate[117440519])},e=function(e){var t="";for(var a in e)t+=a+"="+e[a]+"&";return t=t.substring(0,t.length-1),t}(e),n.send(e)}catch(o){t("fail","0x07000007",self.errorstate[117440519])}},self.Initialize=function(e){self.initsure&&(self.initsure=!1,self.tool=new UTCMiddleWare_Tool,self.daemon=new UTCMiddleWare_Daemon,self.tool.Ie7()&&alert("请使用IE8及以上内核的浏览器或非IE内核浏览器"),self.ApiInit());try{e.success()}catch(t){}}}function UTCMiddleWare_Api(){var e=null,t=this;t.GetVersion=function(t){e.daemon.GetAuxCtlVer(function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.GetKeyInfo=function(t){e.GetKeyInfo.prototype.Id(t)},t.GetKeyInfo.prototype.All=function(t){e.daemon.GetKeyCount(function(a,n,o){"success"===a&&(1!==o?e.errorcallback(t,"fail","0x0700000E",e.errorstate[117440526]):e.daemon.GetKeyHWInfos(function(a,n,o){"success"===a&&(o.id=o.serialnumber,e.successcallback(t,o)),e.errorcallback(t,a,n,o)})),e.errorcallback(t,a,n,o)})},t.GetKeyInfo.prototype.Id=function(t){e.daemon.GetAEKeyID(function(a,n,o){if("success"===a&&""===o&&(a="fail",o="没有检测到钥匙"),"success"===a)switch(t.content){case"id":e.successcallback(t,o);break;default:e.successcallback(t,{id:o})}e.errorcallback(t,a,n,o)})},t.GetKeyCertInfo=function(t){e.GetCertInfo.prototype.All(t)},t.GetCertInfo=function(t){e.GetCertInfo.prototype.All(t)},t.GetCertInfo.prototype.All=function(a){e.daemon.getKeyCert(function(n,o,i){if("success"===n){for(var s=0;s<i.length;s++)i[s].SubjectDN=i[s].SubjectName,i[s].DN=i[s].SubjectName,i[s].IssuerDN=i[s].IssuerName,i[s].SN=i[s].SerialNumber,i[s].Date=i[s].NotBefore.replace("-","/").replace("-","/").replace("T"," ")+"-"+i[s].NotAfter.replace("-","/").replace("-","/").replace("T"," ");if(i=t.GetCertInfo.prototype.screen(a,i,a.code,a.name),!i)return!1;a.success(i)}e.errorcallback(a,n,o,i)})},t.GetCertInfo.prototype.screen=function(t,a,n,o){var i=[];if(void 0!==n)for(var s=0;s<a.length;s++){var r=a[s].DN.split("@");r[1]===n&&i.push(a[s])}else i=a;var l=[];if(void 0!==o)for(var c=0;c<i.length;c++){var u=a[c].DN.split("@");u[2]===o&&l.push(i[c])}else l=i;return 0===l.length?(e.errorcallback(t,"fail","0x0700000C",e.errorstate[117440524]),!1):l},t.GetFilePath=function(t){"undefined"===typeof t.suf&&(t.suf="*"),document.querySelectorAll("body")[0].style.cursor="no-drop",document.querySelectorAll("body")[0].style.pointerEvents="none",e.daemon.GetLocalFilePath(t.suf,function(a,n,o){document.querySelectorAll("body")[0].style.cursor="auto",document.querySelectorAll("body")[0].style.pointerEvents="auto","success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.OpenKey=function(t){e.OpenKey.prototype.OpenEKey(t)},t.OpenKey.prototype.OpenEKey=function(t){void 0===t.pin||""===t.pin?e.errorcallback(t,"fail","0x07000004",e.errorstate[117440516]):t.pin.length>=6&&t.pin.length<=16?e.daemon.OpenEKey(t.pin,function(a,n,o){"success"===a&&t.success(t.pin),void 0!==n&&""!==n.toString()&&"0x03000008"===n.toString()&&e.errorcallback(t,a,n,e.errorstate[50331656])}):e.errorcallback(t,"fail","0x03000004",e.errorstate[50331652])},t.ChangePin=function(t){e.daemon.ChangePIN(t.oldpin,t.newpin,function(a,n,o){"success"===a&&t.success(),e.errorcallback(t,a,n,o)})},t.GetCommSealInfo=function(e){e.sealid=[11,14,15],t.GetSealInfo(e)},t.GetCorpSealInfo=function(e){e.sealid=[12],t.GetSealInfo(e)},t.GetSealInfo=function(t){e.daemon.GetEKeyPic(t.pin,function(a,n,o){if("success"===a){var i=[];if(void 0!==t.sealid)for(var s=0;s<o.length;s++)for(var r=0;r<t.sealid.length;r++)t.sealid[r]===o[s].id&&i.push(o[s]);else i=o;0===i.length?void 0!==t.sealid?t.sealid.indexOf(11)>=0?e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522]):t.sealid.indexOf(12)>=0?e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523]):e.errorcallback(t,"fail","0x0700000D",e.errorstate[117440525]):e.errorcallback(t,"fail","0x0700000D",e.errorstate[117440525]):t.success(i)}e.errorcallback(t,a,n,o)})},t.GetSealSignInfo=function(t){e.daemon.GetEKeyPic(t.pin,function(a,n,o){if("success"===a){var i=new Image,s=new Image;s.onload=function(){if(""===i.src||null===i.src||void 0===i.src)return e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522]),!1;if(""===s.src||null===s.src||void 0===s.src)return e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523]),!1;var a=0;"undefined"!==typeof t.dx&&(a=t.dx);var n=0;"undefined"!==typeof t.dy&&(n=t.dy);var o,r,l=document.createElement("canvas");a>=0&&n>=0?i.width>=s.width+a&&s.height+n>=i.height?(r=i.width,o=s.height+n):i.width<s.width+a&&s.height+n<i.height?(r=s.width+a,o=i.height):i.width<s.width+a&&s.height+n>i.height?(r=s.width+a,o=s.height+n):i.width>s.width+a&&s.height+n<i.height&&(r=i.width,o=i.height):a<0&&n>=0?i.height>=s.height+n?(r=i.width+Math.abs(a)+s.width,o=i.height):i.height<s.height+n&&(r=i.width+Math.abs(a)+s.width,o=s.height+n):a<0&&n<0?s.height>=i.height+Math.abs(n)?(r=s.width+Math.abs(a)+i.width,o=s.height):s.height<i.height+Math.abs(n)&&(r=s.width+Math.abs(a)+i.width,o=i.height+Math.abs(n)):a>=0&&n<0&&(i.width>=s.width+Math.abs(a)?(r=i.width,o=i.height+Math.abs(n)+s.height):i.width<s.width+Math.abs(a)&&(r=s.width+Math.abs(a),o=i.height+Math.abs(n)+s.height)),l.height=o,l.width=r;var c,u,d,f,p=l.getContext("2d");if(a<0?(c=Math.abs(a),d=0):(c=0,d=Math.abs(a)),n<0?(u=Math.abs(n),f=0):(u=0,f=Math.abs(n)),p.drawImage(i,c,u,i.width,i.height),p.drawImage(s,d,f,s.width,s.height),"undefined"!==typeof t.date){var g=t.date,h=20;p.font=h+"px Arial";var y=p.measureText(g).width,m=0;"undefined"!==typeof t.datex&&(m=t.datex);var _=0;"undefined"!==typeof t.datey&&(_=t.datey);var v=p.getImageData(0,0,l.width,l.height);y+m>l.width&&(l.width=y+m),h+_>l.height&&(l.height=h+_),p.putImageData(v,0,0),p.font=h+"px Arial",p.fillText(g,m,_)}t.success({img:l.toDataURL()})},i.onload=function(){for(var a=!0,n=0;n<o.length;n++)if("12"===o[n].id){a=!1,s.src="data:image/png;base64,"+o[n].value;break}a&&e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523])};for(var r=!0,l=0;l<o.length;l++)if("11"===o[l].id){r=!1,i.src="data:image/png;base64,"+o[l].value;break}r&&e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522])}e.errorcallback(t,a,n,o)})},t.Sign=function(t){"file"===t.type?!1===t.detach?e.Sign.prototype.File(t):!0===t.tofile?e.Sign.prototype.FileDetachToFile(t):e.Sign.prototype.FileDetach(t):!0===t.many?e.Sign.prototype.Msg_many(t):!1===t.detach?e.Sign.prototype.Msg(t):e.Sign.prototype.MsgDetach(t)},t.SignMsgDetach=function(t){e.Sign.prototype.MsgDetach(t)},t.SignMsg=function(t){e.Sign.prototype.Msg(t)},t.SignFileDetach=function(t){e.Sign.prototype.FileDetach(t)},t.SignFile=function(t){e.Sign.prototype.File(t)},t.Sign.prototype.Msg=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.SignString(a,t.dn,"",t.data,t.hash,t.detach,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.Sign.prototype.MsgDetach=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.SignStringDetach(a,t.dn,"",t.data,t.hash,t.detach,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.Sign.prototype.FileDetach=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.DoSignFile(a,t.dn,t.path,t.hash,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.Sign.prototype.FileDetachToFile=function(t){e.notdn(t.dn,function(a,n){"success"===a&&e.notpath(t.data,function(a,o){"success"===a&&("undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26"),"undefined"===typeof t.suf&&(t.suf="sig"),e.daemon.DoSignFile3(n,o,t.hash,o+"."+t.suf,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})),e.errorcallback(t,a,o)}),e.errorcallback(t,a,n)})},t.Sign.prototype.File=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26"),"undefined"===typeof t.suf&&(t.suf="sig");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.DoSignFile2(a,t.dn,t.path,t.hash,t.path+"."+t.suf,function(a,n,o){"success"===a&&t.success(t.path+"."+t.suf),e.errorcallback(t,a,n,o)})},t.Sign.prototype.Msg_many=function(t){e.Sign.prototype.Msg_time=0,e.Sign.prototype.Msg_data=t.data,e.iscert(t.dn,t,function(a){e.Sign.prototype.Msg_loop(t,a)})},t.Sign.prototype.Msg_loop=function(t,a){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var n="";"undefined"!==typeof t.pin&&(n=t.pin),e.daemon.SignStringDetach(n,a,"",t.data[e.Sign.prototype.Msg_time].hashValue,t.hash,t.detach,function(n,o,i){"success"===n&&(e.Sign.prototype.Msg_data[e.Sign.prototype.Msg_time].keyString=i,e.Sign.prototype.Msg_time++,e.Sign.prototype.Msg_time>e.Sign.prototype.Msg_data.length-1||0===e.Sign.prototype.Msg_data.length?e.Sign.prototype.Msg_finish(t):e.Sign.prototype.Msg_loop(t,a)),e.errorcallback(t,n,o,i)})},t.Sign.prototype.Msg_finish=function(t){t.success(e.Sign.prototype.Msg_data)},t.Sign.prototype.Msg_time=0,t.Sign.prototype.Msg_data=[],t.SealFormKey=function(a){t.ispin(a.pin,a,function(n){t.iscert(a.dn,a,function(o){t.isseal(a.seal,n,a,function(t){for(var i=a.id.split(","),s=[],r=[],l=0;l<i.length;l++){var c=document.getElementById(i[l]);if(c){var u=void 0,d=void 0,f=void 0,p=void 0;s.push(i[l]),void 0===c.name?(u=c.id,d=c.getAttribute("name")?c.getAttribute("name"):"",f=void 0===c.value?void 0===c.getAttribute("value")?"":c.getAttribute("value").replace(/\s/g,""):c.value.replace(/\s/g,""),p=void 0===c.innerHTML?"":c.innerHTML):(u=c.id,d=c.name,f=c.value,p=void 0===c.innerHTML?"":c.innerHTML),f=f.replace(/\"/g,""),f=f.replace(/\'/g,""),p=p.replace(/\"/g,""),p=p.replace(/\'/g,"");var g="<"+c.tagName+",id="+u+",name="+d+",value="+f+",outerText="+p+">";r.push(g)}}var h=s.join(","),y=r.join("<UTCSplit|>");e.daemon.DoWebSealByEKey(o,n,h,y,t.id||t,function(t,n,o){"success"===t&&a.success(o),e.errorcallback(a,t,n,o)})})})})},t.EncSignFile=function(t){e.daemon.EncSignFile(t.srcFile,t.certInfo,"1.3.14.3.2.26",t.outFile,t.dn,"1.3.14.3.2.26",function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.SignVerify=function(t){"file"===t.type?e.SignVerify.prototype.FileDetach(t):!1===t.detach?e.SignVerify.prototype.Msg(t):e.SignVerify.prototype.MsgDetach(t)},t.SignMsgDetachVerify=function(t){e.SignVerify.prototype.MsgDetach(t)},t.SignMsgVerify=function(t){e.SignVerify.prototype.Msg(t)},t.SignFileDetachVerify=function(t){e.SignVerify.prototype.FileDetach(t)},t.SignVerify.prototype.MsgDetach=function(t){var a=!1;"msg"===t.stype&&(a=!0),"undefined"===typeof t.certtype&&(t.certtype="RSA"),e.daemon.VerifyStringDetach(t.source,t.data,t.certtype,a,function(a,n,o){"success"===a&&t.success(),e.errorcallback(t,a,n,o)})},t.SignVerify.prototype.Msg=function(t){var a=!1;"msg"===t.stype&&(a=!0),"undefined"===typeof t.certtype&&(t.certtype="RSA"),e.daemon.VerifyString(t.source,t.data,t.certtype,a,function(a,n,o){"success"===a&&t.success(),e.errorcallback(t,a,n,o)})},t.SignVerify.prototype.FileDetach=function(t){"undefined"===typeof t.type&&(t.type="RSA"),e.daemon.VerifyFileSign(t.data,t.type,t.path,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.SealFormVerify=function(t){e.daemon.DoWebSealGetBoundId(t.data,function(a,n,o){if("success"===a){for(var i=o.split(","),s=[],r=0;r<i.length;r++){var l=document.getElementById(i[r]);if(l){var c=void 0,u=void 0,d=void 0,f=void 0;void 0===l.name?(c=l.id,u=l.getAttribute("name")?l.getAttribute("name"):"",d=void 0===l.value?void 0===l.getAttribute("value")?"":l.getAttribute("value").replace(/\s/g,""):l.value.replace(/\s/g,""),f=void 0===l.innerHTML?"":l.innerHTML):(c=l.id,u=l.name,d=l.value,f=void 0===l.innerHTML?"":l.innerHTML),d=d.replace(/\"/g,""),d=d.replace(/\'/g,""),f=f.replace(/\"/g,""),f=f.replace(/\'/g,"");var p="<"+l.tagName+",id="+c+",name="+u+",value="+d+",outerText="+f+">";s.push(p)}}e.daemon.DoWebSealVerify(s.join("<UTCSplit|>"),t.data,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})}e.errorcallback(t,a,n,o)})},t.Envelope=function(t){"file"===t.type?e.Envelope.prototype.File(t):e.Envelope.prototype.Msg(t)},t.EnvelopMsg=function(t){e.Envelope.prototype.Msg(t)},t.EnvelopFile=function(t){e.Envelope.prototype.File(t)},t.Envelope.prototype.File=function(t){var a,n;"SM4"===t.basealg?(a="SM2",n="1.2.840.113549.3.4"):(t.basealg,a="RSA",n="1.2.840.113549.3.4"),"undefined"===typeof t.suf&&(t.suf="enc"),e.daemon.EncryptFileCMSEnvelopeEx_ByCert(t.base,a,t.path,t.path+"."+t.suf,n,function(a,n,o){"success"===a&&t.success(t.path+"."+t.suf),e.errorcallback(t,a,n,o)})},t.Envelope.prototype.Msg=function(t){var a,n;"SM4"===t.basealg?(a="SM2",n="1.2.840.113549.3.4"):(t.basealg,a="RSA",n="1.2.840.113549.3.4"),e.daemon.EncryptMsgCMSEnvelopeEx_ByCert(t.data,t.base,a,n,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.EnvelopMsgByKey=function(t){e.daemon.EnvelopMsgByKey(t.data,t.dn,t.alg,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.EnvelopFileByCer=function(t){e.daemon.EnvelopFileByCer(t.path,t.certinfo,t.outpath,t.alg,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.EnvelopFileByKey=function(t){e.daemon.EnvelopFileByKey(t.path,t.dn,t.outpath,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.DecEnvelopedMsg=function(t){e.daemon.DecEnvelopedMsg(t.data,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.DecEnvelopedFile=function(t){e.daemon.DecEnvelopedFile(t.path,t.outpath,t.symkey,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.GetPdfStdSealDataByKey=function(t){e.daemon.GetPdfStdSealDataByKey(t.hash,t.dn,t.pin,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.GetPdfStdSealDataByPfx=function(t){e.daemon.GetPdfStdSealDataByPfx(t.hash,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.DoPdfStdSealByKeyAtPos=function(t){e.daemon.DoPdfStdSealByKeyAtPos(t.path,t.dn,t.pin,t.seal,t.page,t.x,t.y,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.DoPdfStdSealByKeyAtKw=function(t){e.daemon.DoPdfStdSealByKeyAtKw(t.path,t.dn,t.pin,t.seal,t.kw,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.DoWordStdSealByKeyAtPos=function(t){e.daemon.DoWordStdSealByKeyAtPos(t.path,t.page,t.x,t.y,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.DoExcelStdSealByKeyAtPos=function(t){e.daemon.DoExcelStdSealByKeyAtPos(t.path,t.page,t.x,t.y,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.GetLocalCert=function(t){e.daemon.GetLocalCert(function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.VerifySeal=function(t){e.daemon.VerifySeal(t.path,function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.GetKeyCount=function(t){e.daemon.GetKeyCount(function(a,n,o){"success"===a&&t.success(o),e.errorcallback(t,a,n,o)})},t.ApiInit=function(){e=this}}function UTCMiddleWare_Tool(){var e=this;e.loadcss=function(e,t){if(!e||0===e.length)throw new Error('argument "path" is required !');for(var a=!0,n=0;n<document.querySelectorAll("script").length;n++)document.querySelectorAll("script")[n].src.indexOf(e)>=0&&(a=!1);if(a){var o=document.getElementsByTagName("head")[0],i=document.createElement("link");i.href=e,i.rel="stylesheet",i.type="text/css",o.appendChild(i);var s=document.createElement("script");s.onload=s.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{t()}catch(e){}s.onload=s.onreadystatechange=null}}else try{t()}catch(r){}},e.loadjs=function(e,t){if(!e||0===e.length)throw new Error('argument "path" is required !');for(var a=!0,n=0;n<document.querySelectorAll("script").length;n++)document.querySelectorAll("script")[n].src.indexOf(e)>=0&&(a=!1);if(a){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.src=e,i.type="text/javascript",o.appendChild(i),i.onload=i.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{t(!0)}catch(e){}i.onload=i.onreadystatechange=null},i.onerror=function(){try{t(!1)}catch(e){}}}else try{t(!0)}catch(s){}},e.typearray=function(e){for(var t,a=navigator.userAgent,n=a.split(" "),o=!1,i=0;i<n.length;i++){var s=n[i];RegExp(e).test(s)&&(o=!0,t=i)}return{type:o,num:t}},e.Ie7=function(){var t=navigator.userAgent,a=t.split(" ");if(e.typearray("MSIE").type){var n=e.typearray("MSIE").num,o=/^\d+\.\d+/,i=o.exec(a[n+1].replace(/[^0-9.]/gi,""));return UTCMiddleWare.vnum=o.exec(a[n+1].replace(/[^0-9.]/gi,"")),i<8}},e.Browser=function(){var e=navigator.userAgent;return e.indexOf("Firefox")>=0?"Firefox":e.indexOf("Edge")>=0?"Edge":e.indexOf("Trident")>=0?"IE":e.indexOf("Opera")>=0?"Opera":e.indexOf("Chrome")>=0?"Chrome":e.indexOf("Safari")>=0?"Safari":"Other"},e.randomnum=function(e){for(var t="",a=1;a<=e;a++){var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],o=new Date,i=Math.floor(o.getMilliseconds()/1e3*16);t+=n[i]}return t},e.endWith=function(e,t){return!(null===t||""===t||0===e.length||t.length>e.length)&&e.substring(e.length-t.length)===t},e.fromBase64=function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(new ArrayBuffer(a)),o=0;o<a;o++)n[o]=t.charCodeAt(o);return n}}function UTCMiddleWare_Daemon(){var e=this,t=UTCMiddleWare;e.PluginVersion=function(e){UTCMiddleWare.LocalAjaxPost({function:"PluginVersion",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetAuxCtlVer=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetAuxCtlVer",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetKeyHWInfos=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetKeyHWInfos",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetAEKeyID=function(e){UTCMiddleWare.LocalAjaxPost({function:"getKeyID",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.getKeyCert=function(e){UTCMiddleWare.LocalAjaxPost({function:"getCert",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetLocalCert=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetLocalCertDn",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetLocalFilePath=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"GetLocalFilePath",value:{proID:t.code}},function(e,t,n){a(e,t,n)})},e.OpenEKey=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"ChkKeyPin",value:{pin:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.ChangePIN=function(e,a,n){UTCMiddleWare.LocalAjaxPost({function:"ChangePin",value:{oPin:e,nPin:a,proID:t.code}},function(e,t,a){n(e,t,a)})},e.SignString=function(e,a,n,o,i,s,r){UTCMiddleWare.LocalAjaxPost({function:"SignMsg",value:{pin:e,data:o,dn:a||"",hashAlg:i,proID:t.code}},function(e,t,a){r(e,t,a)})},e.SignStringDetach=function(e,a,n,o,i,s,r){UTCMiddleWare.LocalAjaxPost({function:"SignMsgDetached",value:{pin:e,data:o,dn:a||"",hashAlg:i,proID:t.code}},function(e,t,a){r(e,t,a)})},e.VerifyString=function(e,a,n,o,i){UTCMiddleWare.LocalAjaxPost({function:"VerifyMsg",value:{signVal:a,proID:t.code}},function(e,t,a){i(e,t,a)})},e.VerifyStringDetach=function(e,a,n,o,i){UTCMiddleWare.LocalAjaxPost({function:"VerifyMsgDetached",value:{signVal:a,data:e,proID:t.code}},function(e,t,a){i(e,t,a)})},e.DoSignFile=function(e,a,n,o,i){UTCMiddleWare.LocalAjaxPost({function:"SignFileDetachedToMsg",value:{pin:e,srcFile:n,dn:a||"",hashAlg:o,proID:t.code}},function(e,t,a){i(e,t,a)})},e.DoSignFile2=function(e,a,n,o,i,s){UTCMiddleWare.LocalAjaxPost({function:"SignFile",value:{pin:e,srcFile:n,outFile:i,dn:a||"",hashAlg:o,proID:t.code}},function(e,t,a){s(e,t,a)})},e.EncSignFile=function(e,t,a,n,o,i,s){UTCMiddleWare.LocalAjaxPost({function:"EncSignFile",value:{srcFile:e,certInfo:t,encAlg:a,outFile:n,dn:o,hashAlg:i}},function(e,t,a){s(e,t,a)})},e.VerifyFileSign=function(e,a,n,o){UTCMiddleWare.LocalAjaxPost({function:"VerifyFileDetached",value:{signVal:e,srcFile:n,proID:t.code}},function(e,t,a){o(e,t,a)})},e.VerifyFilesSign=function(e,a,n){UTCMiddleWare.LocalAjaxPost({function:"VerifyFileDetached",value:{signValFile:a,srcFiles:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.EncryptMsgCMSEnvelopeEx_ByCert=function(e,a,n,o,i){var s=a.replace(/=/gi,"#");UTCMiddleWare.LocalAjaxPost({function:"EnvelopMsg",value:{data:e,certInfo:s,encAlg:o,proID:t.code}},function(e,t,a){i(e,t,a)})},e.EncryptFileCMSEnvelopeEx_ByCert=function(e,a,n,o,i,s){var r=e.replace(/=/gi,"#");UTCMiddleWare.LocalAjaxPost({function:"EnvelopFile",value:{srcFile:n,outFile:o,certInfo:r,encAlg:i,proID:t.code}},function(e,t,a){s(e,t,a)})},e.EnvelopMsgByKey=function(e,a,n,o){UTCMiddleWare.LocalAjaxPost({function:"EnvelopMsgByKey",value:{data:e,dn:a,encAlg:n,proID:t.code}},function(e,t,a){o(e,t,a)})},e.EnvelopFileByCer=function(e,a,n,o,i){UTCMiddleWare.LocalAjaxPost({function:"EnvelopFileByCer",value:{srcFile:e,certinfo:a,outFile:n,encAlg:o,proID:t.code}},function(e,t,a){i(e,t,a)})},e.EnvelopFileByKey=function(e,a,n,o){UTCMiddleWare.LocalAjaxPost({function:"EnvelopFileByKey",value:{srcFile:e,dn:a,outFile:n,proID:t.code}},function(e,t,a){o(e,t,a)})},e.DecEnvelopedMsg=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"DecEnvelopedMsg",value:{strSymKeyEnvelope:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.DecEnvelopedFile=function(e,a,n,o){UTCMiddleWare.LocalAjaxPost({function:"DecEnvelopedFile",value:{encFile:e,decFile:a,strSymKeyEnvelope:n,proID:t.code}},function(e,t,a){o(e,t,a)})},e.DoWebSealByEKey=function(e,a,n,o,i,s){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealByEKey",value:{dn:e,password:a,boundID:n,boundVal:o,dataID:i,proID:t.code}},function(e,t,a){s(e,t,a)})},e.DoWebSealGetBoundId=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealGetBoundId",value:{sealinfo:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.DoWebSealVerify=function(e,a,n){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealVerify",value:{val:e,sealinfo:a,proID:t.code}},function(e,t,a){n(e,t,a)})},e.GetPdfStdSealDataByKey=function(e,a,n,o){UTCMiddleWare.LocalAjaxPost({function:"GetPdfStdSealDataByKey",value:{fileAbs:e,pwd:n,keyDn:a,proID:t.code}},function(e,t,a){o(e,t,a)})},e.GetPdfStdSealDataByPfx=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"GetPdfStdSealDataByPfx",value:{fileAbs:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.DoPdfStdSealByKeyAtPos=function(e,a,n,o,i,s,r,l){UTCMiddleWare.LocalAjaxPost({function:"DoPdfStdSealByKeyAtPos",value:{sourceFile:e,pinCode:n,dnName:a,imgBase64:o,pageNo:i,xPosition:s,yPosition:r,proID:t.code}},function(e,t,a){l(e,t,a)})},e.DoPdfStdSealByKeyAtKw=function(e,a,n,o,i,s){UTCMiddleWare.LocalAjaxPost({function:"DoPdfStdSealByKeyAtKw",value:{sourceFile:e,pinCode:n,dnName:a,imgBase64:o,charString:i,proID:t.code}},function(e,t,a){s(e,t,a)})},e.DoWordStdSealByKeyAtPos=function(e,a,n,o,i){UTCMiddleWare.LocalAjaxPost({function:"DoSealInWordByCoord",value:{sSourceFile:e,xPosition:n,yPosition:o,pageNo:a,proID:t.code}},function(e,t,a){i(e,t,a)})},e.DoExcelStdSealByKeyAtPos=function(e,a,n,o,i){UTCMiddleWare.LocalAjaxPost({function:"DoSealInExcelByCoord",value:{sSourceFile:e,xPosition:n,yPosition:o,pageNo:a,proID:t.code}},function(e,t,a){i(e,t,a)})},e.GetEKeyPic=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"GetSealImage",value:{pin:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.VerifySeal=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"VerifySeal",value:{pdfFile:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.GetKeyCount=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetKeyCount",value:{proID:t.code}},function(t,a,n){e(t,a,n)})}}UTCMiddleWare_Function.prototype=new UTCMiddleWare_Api;var UTCMiddleWare=new UTCMiddleWare_Function;UTCMiddleWare.Initialize(),__webpack_exports__["a"]=UTCMiddleWare},2:function(e,t){},"2b2d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchPdf}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.patchSignPosition}},[e._v("按位置批签")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.patchSignKeyWord}},[e._v("按关键字批签")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},on:{blur:e.getFocus,focus:e.lostFocus},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)]),e._v(" "),a("el-main",[a("el-table",{staticStyle:{width:"100%","line-height":"20px"},attrs:{data:e.pdfList,size:"small",height:"calc(100vh - 198px)",border:""},on:{"selection-change":e.changeFun}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileId",label:"文件id",width:"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastTime",label:"时间","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileSize",label:"文件大小","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hasSign",label:"是否已签章","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",width:"190",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.signSingleM(t)}}},[e._v("签章")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"line-height":"2px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,30,40],"page-size":e.queryParam.pageInfo.size,layout:"total, sizes, prev, pager, next, jumper",total:e.queryParam.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"按位置批签",visible:e.dialogPositionVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogPositionVisible=t}}},[a("el-form",{ref:"patchPositionParam",attrs:{model:e.patchPositionParam,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"签署类型",prop:"signType"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署类型"},model:{value:e.patchPositionParam.signType,callback:function(t){e.$set(e.patchPositionParam,"signType",t)},expression:"patchPositionParam.signType"}},[a("el-option",{attrs:{label:"签名",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签章",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:""},model:{value:e.patchPositionParam.pin,callback:function(t){e.$set(e.patchPositionParam,"pin",t)},expression:"patchPositionParam.pin"}})],1)],1),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.positionSignSure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"按位置单签",visible:e.dialogSinglePos,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogSinglePos=t}}},[a("el-form",{ref:"patchPositionParam",attrs:{model:e.singlePositionParam,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:""},model:{value:e.singlePositionParam.pin,callback:function(t){e.$set(e.singlePositionParam,"pin",t)},expression:"singlePositionParam.pin"}})],1)],1),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.singlePosSignSure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.progressVisible,width:"20%","before-close":e.handleClose,align:"center"},on:{"update:visible":function(t){e.progressVisible=t}}},[a("el-progress",{attrs:{type:"circle",percentage:e.singlePercentage.percentage,status:e.singlePercentage.signStatus}})],1),e._v(" "),a("el-dialog",{attrs:{title:"按关键字批签",visible:e.dialogKeywordVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogKeywordVisible=t}}},[a("el-form",{ref:"patchKeywordParam",attrs:{model:e.patchKeywordParam,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:"请输入关键字"},model:{value:e.patchKeywordParam.keyword,callback:function(t){e.$set(e.patchKeywordParam,"keyword",t)},expression:"patchKeywordParam.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"偏移方位",prop:"isDeviation"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择相对于关键字偏移方位"},model:{value:e.patchKeywordParam.isDeviation,callback:function(t){e.$set(e.patchKeywordParam,"isDeviation",t)},expression:"patchKeywordParam.isDeviation"}},[a("el-option",{attrs:{label:"不偏移",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"向上偏移",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"向下偏移",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"向左偏移",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"向右偏移",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"签署类型",prop:"signType"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署类型"},model:{value:e.patchKeywordParam.signType,callback:function(t){e.$set(e.patchKeywordParam,"signType",t)},expression:"patchKeywordParam.signType"}},[a("el-option",{attrs:{label:"签名",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签章",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"签署位置",prop:"signMode"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署第几个关键字"},model:{value:e.patchKeywordParam.signMode,callback:function(t){e.$set(e.patchKeywordParam,"signMode",t)},expression:"patchKeywordParam.signMode"}},[a("el-option",{attrs:{label:"签署第一个关键字",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签署最后一个关键字",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"签署所有关键字",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"签署第二个关键字",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{"show-password":"",placeholder:"请输入PIN码"},model:{value:e.patchKeywordParam.pin,callback:function(t){e.$set(e.patchKeywordParam,"pin",t)},expression:"patchKeywordParam.pin"}})],1)],1),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.keywordSignSure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新一代交易平台电子签章",visible:e.dialogSingleShow,width:"95%",top:"5px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogSingleShow=t}}},[a("iframe",{ref:"child",attrs:{src:e.iframePdf,width:e.iframeWidth,height:e.iframeHigh,frameborder:"0"}})])],1)},o=[],i=(a("ac6a"),a("5df3"),a("f400"),a("d225")),s=a("b0b4"),r=a("b775"),l=function(){function e(){Object(i["a"])(this,e)}return Object(s["a"])(e,null,[{key:"querySeals",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealManage/querySeals",method:"post",data:e})}},{key:"queryScene",value:function(){return Object(r["a"])({url:"/px-common-signature/searchScene/queryScene",method:"post"})}},{key:"changeStatus",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealManage/updateStatus",method:"post",data:e})}},{key:"sealStart",value:function(){return Object(r["a"])({url:"/px-common-signature/pdfView",method:"post"})}},{key:"getPdfList",value:function(e){return Object(r["a"])({url:"/px-common-signature/getPdfList",method:"post",data:e})}}]),e}(),c=(a("ac4d"),a("8a81"),a("1fa89")),u=a("5c96"),d=function(){function e(){Object(i["a"])(this,e)}return Object(s["a"])(e,null,[{key:"patchPositionOrKeyword",value:function(t,a){console.log("获取的值为:"+t),console.log("检测钥匙Pin码，事件绑定成功");var n=t.signType,o=t.pin,i=t.selectFiles;console.log("转化后的值为"+i);var s="{",r=!0,l=!1,u=void 0;try{for(var d,f=i.entries()[Symbol.iterator]();!(r=(d=f.next()).done);r=!0){var p=d.value;s=s+'"'+p[0]+'":"'+p[1]+'",'}}catch(x){l=!0,u=x}finally{try{r||null==f.return||f.return()}finally{if(l)throw u}}s=s.substr(0,s.length-1)+"}",console.log("拼接后字符串为:"+s);var g,h,y,m,_,v,P,S,b=new Map,M=new Array([]),w=new Array([]);void 0===t.keyword?(v=t.patchPosition.p,P=t.patchPosition.x,S=t.patchPosition.y):(y=t.keyword,m=t.signMode,_=t.isDeviation),console.log("进入签章方法"+n+":"+P+":"+S+":"+v);var D=new Promise(function(t){c["a"].OpenKey({pin:o,success:function(a){console.log("pin码正确"),c["a"].GetCertInfo({success:function(e){console.log(JSON.stringify(e));var t=JSON.stringify(e),a=new Function("return"+t)();g=a[0].DN,console.log(g)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}});var i=new Promise(function(t){c["a"].GetSealInfo({pin:o,success:function(a){var i=null;"1"===n?n="11":"0"===n&&(n="12");for(var r=0;r<a.length;r++)if(a[r].id===n){i=a[r].value;break}if(void 0===y||null===y||""===y){var l={xPos:P,yPos:S,sealInfoBase64:i,strReason:"",strLocation:"",fileInfos:{fileInfos:s},pageNo:v},c=new Promise(function(t){e.getPdfStdDigests(l).then(function(a){if(0===a.status){h=a.data;var n=new Promise(function(t){e.patchSign(b,w,M,h,o,g).then(function(e){t(e)})});t(n)}else e.failMessage("获取摘要信息，接口调用失败")})});t(c)}else{var u,d;if(void 0!==_&&null!=_)switch(_){case"0":u=0,d=0;break;case"1":u=0,d=-16;break;case"2":u=0,d=8;break;case"3":u=-10,d=0;break;case"4":u=10,d=0;break;default:u=0,d=0;break}else u=0,d=0;var f={xPos:u,yPos:d,sealInfoBase64:i,strReason:"",strLocation:"",fileInfos:{fileInfos:s},keyStr:y,signMode:m},p=new Promise(function(t){e.getPdfStdDigestOnKws(f).then(function(a){if(0===a.status){h=a.data;var n=new Promise(function(t){e.patchSign(b,w,M,h,o,g).then(function(e){t(e)})});t(n)}else e.failMessage("获取摘要信息，接口调用失败")})});t(p)}},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});t(i)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});return D}},{key:"signPdf",value:function(t,a,n,o,i,s,r){c["a"].GetPdfStdSealDataByKey({hash:n,dn:o,pin:i,success:function(n){var o={fileName:a,signInfo:n};e.sealStdPdfReturnByte(o).then(function(n){if(0===n.status)if(0===n.data.status){var o={fileId:t,fileName:a,message:"文件签章成功"};s.push(o)}else{var i={fileId:t,fileName:a,message:n.data.message};r.push(i)}else{var l={fileId:t,fileName:a,message:"生成签章数据接口调用失败"};r.push(l),e.failMessage("生成签章数据接口调用失败")}}).catch(function(e){console.log("阻止事件冒泡"+e);var n={fileId:t,fileName:a,message:e};r.push(n)}).then(function(e){console.log("阻止promise冒泡")})},fail:function(n){var o={fileId:t,fileName:a,message:n};r.push(o),e.failMessage(n)},error:function(n){var o={fileId:t,fileName:a,message:n};r.push(o),e.errorMessage(n)}})}},{key:"getPdfStdDigests",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealManage/getPdfStdDigests",method:"post",data:e})}},{key:"getPdfStdDigestOnKws",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealManage/getPdfStdDigestOnKws",method:"post",data:e})}},{key:"sealStdPdfReturnByte",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealManage/sealStdPdfReturnByte",method:"post",data:e})}},{key:"patchSign",value:function(t,a,n,o,i,s){for(var r=0,l=0;l<o.length;l++){var c=void 0,u=void 0,d=void 0;if(r+=1,!0===o[l].digestStatus)c=o[l].digest,u=o[l].fileName,d=o[l].fileId,e.signPdf(d,u,c,s,i,n,a);else{var f={fileId:o[l].fileId,fileName:o[l].fileName,message:o[l].digest};a.push(f)}}if(r>=o.length)return setTimeout(function(){},2e3),new Promise(function(e){t.set("success",n),t.set("error",a),e(t)})}},{key:"failMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"errorMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}}]),e}(),f=function(){function e(){Object(i["a"])(this,e)}return Object(s["a"])(e,null,[{key:"singleSignPosition",value:function(e,t){}},{key:"failMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"errorMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}}]),e}(),p={fileId:"",fileName:"",lastTime:"",fileSize:"",hasSign:""},g={name:"Approval",data:function(){return{value1:"",dialogPositionVisible:!1,dialogSinglePos:!1,progressVisible:!1,singlePercentage:{percentage:0,signStatus:""},dialogSingleShow:!1,dialogKeywordVisible:!1,passForm:!1,iframeWidth:"",iframeHigh:"",iframePdf:"",baseURL:"http://192.100.2.64:19252",signSingle:Object.assign({},p),pdfList:[],currentPage:1,queryParam:{data:{fileIds:["1","2","3"]},pageInfo:{pageNum:1,pageSize:2,size:0,startRow:1,endRow:1,pages:0,prePage:0,nextPage:0,isFirstPage:!0,isLastPage:!0,hasPreviousPage:!1,navigatePages:0,navigatepageNums:[],navigateFirstPage:1,navigateLastPage:1,total:0}},selectList:[],patchPositionParam:{selectFiles:new Map,patchPosition:{},signType:"",pin:""},patchKeywordParam:{selectFiles:new Map,keyword:"",isDeviation:"",signMode:"",signType:"",pin:""},singlePositionParam:{singlePosition:{},signType:"",pin:""}}},watch:{},mounted:function(){this.queryPage(this.queryParam),window.addEventListener("message",this.handleMessage)},methods:{queryPage:function(e){var t=this;l.getPdfList(e).then(function(e){t.pdfList=e.data.list,t.queryParam.pageInfo=e.data})},searchPdf:function(){this.queryPage(this.queryParam)},handleClose:function(e){e()},signSingleM:function(e){e.$index;var t=e.row;console.log(t.fileId);var a=t.fileId;this.dialogSingleShow=!0,this.iframePdf=this.baseURL+"/px-common-signature/pdfView?id="+a;var n=document.body.scrollWidth,o=document.body.scrollHeight;n<985&&(n=985),this.iframeWidth=.9*n,this.iframeHigh=.78*o},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.queryParam.pageInfo.pageSize=e,this.queryPage(this.queryParam)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.queryParam.pageInfo.pageNum=e-1,this.queryPage(this.queryParam)},patchSignPosition:function(){var e="";null!=this.selectList&&0!==this.selectList.length&&(e=this.selectList[0].fileId),this.dialogSingleShow=!0,this.iframePdf=this.baseURL+"/px-common-signature/pdfView?id="+e+"&type=pSign";var t=document.body.scrollWidth,a=document.body.scrollHeight;t<985&&(t=985),this.iframeWidth=.9*t,this.iframeHigh=.78*a},patchSignKeyWord:function(){this.dialogKeywordVisible=!0},changeFun:function(e){this.selectList=e},handleMessage:function(e){var t=e.data;switch(t.cmd){case"singleSignPosition":console.log("单签位置"),!0===t.params.success&&(this.singlePositionParam.signType=t.params.data.signType,this.singlePositionParam.singlePosition={xPos:t.params.data.x,yPos:t.params.data.y,pageNum:t.params.data.p},this.dialogSinglePos=!0);break;case"returnPosition":console.log("按位置批签位置"),!0===t.params.success&&(this.dialogSingleShow=!1,this.dialogPositionVisible=!0,this.patchPositionParam.patchPosition=t.params.data,console.log(this.patchPositionParam.patchPosition));break}},positionSignSure:function(){var e=this;this.patchPositionParam.selectFiles=new Map,console.log("签章位置"+this.patchPositionParam.patchPosition);for(var t=0;t<this.selectList.length;t++)this.patchPositionParam.selectFiles.set(this.selectList[t].fileId,this.selectList[t].fileName);console.log("待签章的文件为:"+JSON.stringify(this.patchPositionParam.selectFiles)),d.patchPositionOrKeyword(this.patchPositionParam).then(function(t){console.log(t),console.log(t.get("success")),console.log(t.get("error")),e.dialogPositionVisible=!1,e.resetForm("patchPositionParam")})},keywordSignSure:function(){var e=this;this.patchKeywordParam.selectFiles=new Map;for(var t=0;t<this.selectList.length;t++)this.patchKeywordParam.selectFiles.set(this.selectList[t].fileId,this.selectList[t].fileName);console.log(this.patchKeywordParam.selectFiles),d.patchPositionOrKeyword(this.patchKeywordParam).then(function(t){console.log(t),console.log(t.get("success")),console.log(t.get("error")),e.dialogKeywordVisible=!1,e.resetForm("patchKeywordParam")})},resetForm:function(e){this.$refs[e].resetFields()},singlePosSignSure:function(){this.progressVisible=!0,f.singleSignPosition(this.singlePositionParam,this.singlePercentage)}}},h=g,y=(a("0e4f"),a("2877")),m=Object(y["a"])(h,n,o,!1,null,"0a7f9748",null);t["default"]=m.exports},3:function(e,t){},"4bf8d":function(e,t,a){"use strict";a("6b54"),a("ac6a"),a("75fc"),a("34ef"),a("1146");a("0fd4")},"4ec1":function(e,t,a){}}]);