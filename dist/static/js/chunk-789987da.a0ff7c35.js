(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-789987da"],{1:function(e,t){},"1fa89":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("34ef"),core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5__),_vendor_Export2Excel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4bf8d");function UTCMiddleWare_Function(){var self=this;self.code="pRLXrMwv6PpRY1iCfNqBpoglbQ3M9KNMF81sRqyAQ0lF6QTzmbGLBunPf8waWKV9OdxAJwIMVwD4K2pCm/1D5qeZuNYxiBA0QVOqge8wTVRVBQVYvNHSmfvHvIsSGfQnK/dsRkqsF8Nf9safhGXmhrINzi1ftHQrCWNXEzmNufg=",self.version="",self.isloading=!0,self.loadingflag=null,self.usekey=!1,self.vnum=null,self.initsure=!0,self.errorstate={117440512:"（第三方错误/系统错误)",117440513:"请先启动电子钥匙辅助控件",117440514:"电子钥匙辅助控件请求超时",117440515:"电子钥匙辅助控件拒绝访问",117440516:"缺少参数或参数格式错误",117440517:"没有找到指定挂载的接口库",117440518:"参数格式错误无法解析",117440519:"无法连接外部服务",117440520:"外部服务请求超时",117440521:"外部服务拒绝访问",117440528:"取消选择印章",117440522:"钥匙中缺少公章信息",117440523:"钥匙中缺少法人章/签字信息",117440524:"没有符合筛选条件的证书",117440525:"钥匙中缺少印章信息",117440526:"请勿同时插入多把电子钥匙",50331656:"PIN码不正确",50331652:"请输入6位数PIN码"},self.AddPlugin=function(json){var pluginlist=["Inside","Evaluate","Idcard","Ui","Hidden"];function loop(num){eval("json."+pluginlist[num].toLowerCase())?self.tool.loadjs(eval("json."+pluginlist[num].toLowerCase()),function(bool){if(bool)try{eval("self."+pluginlist[num]+"=new UTCMiddleWare_"+pluginlist[num]+"()"),json.success("UTCMiddleWare."+pluginlist[num])}catch(e){json.fail("0x07000005",self.errorstate[117440517]+","+e.message)}else json.fail("0x07000005",self.errorstate[117440517]);num<pluginlist.length-1&&(num++,loop(num))}):num<pluginlist.length-1&&(num++,loop(num))}loop(0)},self.successcallback=function(e,t){"function"===typeof e.success||"function"===typeof e.finish?e.success(t):alert(t)},self.errorcallback=function(e,t,n,a){"fail"===t&&("function"!==typeof e.fail&&"function"!==typeof e.finish||e.fail(n,a)),"error"===t&&("function"!==typeof e.error&&"function"!==typeof e.finish||e.error(n,a))},self.LocalAjaxPost=function(json,callback){try{try{eval("json = '"+JSON.stringify(json)+"';")}catch(e){return callback("fail","0x07000006",self.errorstate[117440518]),!1}var url="http://127.0.0.1:58902/UTCDaemon/",shitie;if("https:"===document.location.protocol&&(url="https://daemon.utcsoft.com:58912/UTCDaemon/"),navigator.userAgent.indexOf("Trident/")>=0)shitie=window.ActiveXObject&&self.vnum<9?new ActiveXObject("Microsoft.XMLHttp"):new XMLHttpRequest,shitie.open("Get",url,!0),shitie.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),shitie.onreadystatechange=function(){4===shitie.readyState&&postfn()},shitie.send();else postfn()}catch(e){callback("fail","0x07000001",self.errorstate[117440513])}function postfn(){var e;e=window.ActiveXObject&&self.vnum<9?new ActiveXObject("Microsoft.XMLHttp"):new XMLHttpRequest,e.open("POST",url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var t=JSON.parse(e.responseText);"0"===t.code?callback("success",t.code,t.result):callback("fail",t.code,t.errormsg)}else callback("fail","0x07000001",self.errorstate[117440513])},json=json.replace(/\\/gi,"\\\\"),e.send("json="+json)}},self.WebAjaxPost=function(e,t){try{var n=e.url,a=new XMLHttpRequest;a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var e=JSON.parse(a.responseText);t("success",e)}else t("fail","0x07000007",self.errorstate[117440519])},e=function(e){var t="";for(var n in e)t+=n+"="+e[n]+"&";return t=t.substring(0,t.length-1),t}(e),a.send(e)}catch(o){t("fail","0x07000007",self.errorstate[117440519])}},self.Initialize=function(e){self.initsure&&(self.initsure=!1,self.tool=new UTCMiddleWare_Tool,self.daemon=new UTCMiddleWare_Daemon,self.tool.Ie7()&&alert("请使用IE8及以上内核的浏览器或非IE内核浏览器"),self.ApiInit());try{e.success()}catch(t){}}}function UTCMiddleWare_Api(){var e=null,t=this;t.GetVersion=function(t){e.daemon.GetAuxCtlVer(function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.GetKeyInfo=function(t){e.GetKeyInfo.prototype.Id(t)},t.GetKeyInfo.prototype.All=function(t){e.daemon.GetKeyCount(function(n,a,o){"success"===n&&(1!==o?e.errorcallback(t,"fail","0x0700000E",e.errorstate[117440526]):e.daemon.GetKeyHWInfos(function(n,a,o){"success"===n&&(o.id=o.serialnumber,e.successcallback(t,o)),e.errorcallback(t,n,a,o)})),e.errorcallback(t,n,a,o)})},t.GetKeyInfo.prototype.Id=function(t){e.daemon.GetAEKeyID(function(n,a,o){if("success"===n&&""===o&&(n="fail",o="没有检测到钥匙"),"success"===n)switch(t.content){case"id":e.successcallback(t,o);break;default:e.successcallback(t,{id:o})}e.errorcallback(t,n,a,o)})},t.GetKeyCertInfo=function(t){e.GetCertInfo.prototype.All(t)},t.GetCertInfo=function(t){e.GetCertInfo.prototype.All(t)},t.GetCertInfo.prototype.All=function(n){e.daemon.getKeyCert(function(a,o,i){if("success"===a){for(var r=0;r<i.length;r++)i[r].SubjectDN=i[r].SubjectName,i[r].DN=i[r].SubjectName,i[r].IssuerDN=i[r].IssuerName,i[r].SN=i[r].SerialNumber,i[r].Date=i[r].NotBefore.replace("-","/").replace("-","/").replace("T"," ")+"-"+i[r].NotAfter.replace("-","/").replace("-","/").replace("T"," ");if(i=t.GetCertInfo.prototype.screen(n,i,n.code,n.name),!i)return!1;n.success(i)}e.errorcallback(n,a,o,i)})},t.GetCertInfo.prototype.screen=function(t,n,a,o){var i=[];if(void 0!==a)for(var r=0;r<n.length;r++){var s=n[r].DN.split("@");s[1]===a&&i.push(n[r])}else i=n;var l=[];if(void 0!==o)for(var c=0;c<i.length;c++){var u=n[c].DN.split("@");u[2]===o&&l.push(i[c])}else l=i;return 0===l.length?(e.errorcallback(t,"fail","0x0700000C",e.errorstate[117440524]),!1):l},t.GetFilePath=function(t){"undefined"===typeof t.suf&&(t.suf="*"),document.querySelectorAll("body")[0].style.cursor="no-drop",document.querySelectorAll("body")[0].style.pointerEvents="none",e.daemon.GetLocalFilePath(t.suf,function(n,a,o){document.querySelectorAll("body")[0].style.cursor="auto",document.querySelectorAll("body")[0].style.pointerEvents="auto","success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.OpenKey=function(t){e.OpenKey.prototype.OpenEKey(t)},t.OpenKey.prototype.OpenEKey=function(t){void 0===t.pin||""===t.pin?e.errorcallback(t,"fail","0x07000004",e.errorstate[117440516]):t.pin.length>=6&&t.pin.length<=16?e.daemon.OpenEKey(t.pin,function(n,a,o){"success"===n&&t.success(t.pin),void 0!==a&&""!==a.toString()&&"0x03000008"===a.toString()&&e.errorcallback(t,n,a,e.errorstate[50331656])}):e.errorcallback(t,"fail","0x03000004",e.errorstate[50331652])},t.ChangePin=function(t){e.daemon.ChangePIN(t.oldpin,t.newpin,function(n,a,o){"success"===n&&t.success(),e.errorcallback(t,n,a,o)})},t.GetCommSealInfo=function(e){e.sealid=[11,14,15],t.GetSealInfo(e)},t.GetCorpSealInfo=function(e){e.sealid=[12],t.GetSealInfo(e)},t.GetSealInfo=function(t){e.daemon.GetEKeyPic(t.pin,function(n,a,o){if("success"===n){var i=[];if(void 0!==t.sealid)for(var r=0;r<o.length;r++)for(var s=0;s<t.sealid.length;s++)t.sealid[s]===o[r].id&&i.push(o[r]);else i=o;0===i.length?void 0!==t.sealid?t.sealid.indexOf(11)>=0?e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522]):t.sealid.indexOf(12)>=0?e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523]):e.errorcallback(t,"fail","0x0700000D",e.errorstate[117440525]):e.errorcallback(t,"fail","0x0700000D",e.errorstate[117440525]):t.success(i)}e.errorcallback(t,n,a,o)})},t.GetSealSignInfo=function(t){e.daemon.GetEKeyPic(t.pin,function(n,a,o){if("success"===n){var i=new Image,r=new Image;r.onload=function(){if(""===i.src||null===i.src||void 0===i.src)return e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522]),!1;if(""===r.src||null===r.src||void 0===r.src)return e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523]),!1;var n=0;"undefined"!==typeof t.dx&&(n=t.dx);var a=0;"undefined"!==typeof t.dy&&(a=t.dy);var o,s,l=document.createElement("canvas");n>=0&&a>=0?i.width>=r.width+n&&r.height+a>=i.height?(s=i.width,o=r.height+a):i.width<r.width+n&&r.height+a<i.height?(s=r.width+n,o=i.height):i.width<r.width+n&&r.height+a>i.height?(s=r.width+n,o=r.height+a):i.width>r.width+n&&r.height+a<i.height&&(s=i.width,o=i.height):n<0&&a>=0?i.height>=r.height+a?(s=i.width+Math.abs(n)+r.width,o=i.height):i.height<r.height+a&&(s=i.width+Math.abs(n)+r.width,o=r.height+a):n<0&&a<0?r.height>=i.height+Math.abs(a)?(s=r.width+Math.abs(n)+i.width,o=r.height):r.height<i.height+Math.abs(a)&&(s=r.width+Math.abs(n)+i.width,o=i.height+Math.abs(a)):n>=0&&a<0&&(i.width>=r.width+Math.abs(n)?(s=i.width,o=i.height+Math.abs(a)+r.height):i.width<r.width+Math.abs(n)&&(s=r.width+Math.abs(n),o=i.height+Math.abs(a)+r.height)),l.height=o,l.width=s;var c,u,d,f,p=l.getContext("2d");if(n<0?(c=Math.abs(n),d=0):(c=0,d=Math.abs(n)),a<0?(u=Math.abs(a),f=0):(u=0,f=Math.abs(a)),p.drawImage(i,c,u,i.width,i.height),p.drawImage(r,d,f,r.width,r.height),"undefined"!==typeof t.date){var g=t.date,h=20;p.font=h+"px Arial";var y=p.measureText(g).width,_=0;"undefined"!==typeof t.datex&&(_=t.datex);var m=0;"undefined"!==typeof t.datey&&(m=t.datey);var v=p.getImageData(0,0,l.width,l.height);y+_>l.width&&(l.width=y+_),h+m>l.height&&(l.height=h+m),p.putImageData(v,0,0),p.font=h+"px Arial",p.fillText(g,_,m)}t.success({img:l.toDataURL()})},i.onload=function(){for(var n=!0,a=0;a<o.length;a++)if("12"===o[a].id){n=!1,r.src="data:image/png;base64,"+o[a].value;break}n&&e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523])};for(var s=!0,l=0;l<o.length;l++)if("11"===o[l].id){s=!1,i.src="data:image/png;base64,"+o[l].value;break}s&&e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522])}e.errorcallback(t,n,a,o)})},t.Sign=function(t){"file"===t.type?!1===t.detach?e.Sign.prototype.File(t):!0===t.tofile?e.Sign.prototype.FileDetachToFile(t):e.Sign.prototype.FileDetach(t):!0===t.many?e.Sign.prototype.Msg_many(t):!1===t.detach?e.Sign.prototype.Msg(t):e.Sign.prototype.MsgDetach(t)},t.SignMsgDetach=function(t){e.Sign.prototype.MsgDetach(t)},t.SignMsg=function(t){e.Sign.prototype.Msg(t)},t.SignFileDetach=function(t){e.Sign.prototype.FileDetach(t)},t.SignFile=function(t){e.Sign.prototype.File(t)},t.Sign.prototype.Msg=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var n="";"undefined"!==typeof t.pin&&(n=t.pin),e.daemon.SignString(n,t.dn,"",t.data,t.hash,t.detach,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.Sign.prototype.MsgDetach=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var n="";"undefined"!==typeof t.pin&&(n=t.pin),e.daemon.SignStringDetach(n,t.dn,"",t.data,t.hash,t.detach,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.Sign.prototype.FileDetach=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var n="";"undefined"!==typeof t.pin&&(n=t.pin),e.daemon.DoSignFile(n,t.dn,t.path,t.hash,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.Sign.prototype.FileDetachToFile=function(t){e.notdn(t.dn,function(n,a){"success"===n&&e.notpath(t.data,function(n,o){"success"===n&&("undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26"),"undefined"===typeof t.suf&&(t.suf="sig"),e.daemon.DoSignFile3(a,o,t.hash,o+"."+t.suf,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})),e.errorcallback(t,n,o)}),e.errorcallback(t,n,a)})},t.Sign.prototype.File=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26"),"undefined"===typeof t.suf&&(t.suf="sig");var n="";"undefined"!==typeof t.pin&&(n=t.pin),e.daemon.DoSignFile2(n,t.dn,t.path,t.hash,t.path+"."+t.suf,function(n,a,o){"success"===n&&t.success(t.path+"."+t.suf),e.errorcallback(t,n,a,o)})},t.Sign.prototype.Msg_many=function(t){e.Sign.prototype.Msg_time=0,e.Sign.prototype.Msg_data=t.data,e.iscert(t.dn,t,function(n){e.Sign.prototype.Msg_loop(t,n)})},t.Sign.prototype.Msg_loop=function(t,n){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.SignStringDetach(a,n,"",t.data[e.Sign.prototype.Msg_time].hashValue,t.hash,t.detach,function(a,o,i){"success"===a&&(e.Sign.prototype.Msg_data[e.Sign.prototype.Msg_time].keyString=i,e.Sign.prototype.Msg_time++,e.Sign.prototype.Msg_time>e.Sign.prototype.Msg_data.length-1||0===e.Sign.prototype.Msg_data.length?e.Sign.prototype.Msg_finish(t):e.Sign.prototype.Msg_loop(t,n)),e.errorcallback(t,a,o,i)})},t.Sign.prototype.Msg_finish=function(t){t.success(e.Sign.prototype.Msg_data)},t.Sign.prototype.Msg_time=0,t.Sign.prototype.Msg_data=[],t.SealFormKey=function(n){t.ispin(n.pin,n,function(a){t.iscert(n.dn,n,function(o){t.isseal(n.seal,a,n,function(t){for(var i=n.id.split(","),r=[],s=[],l=0;l<i.length;l++){var c=document.getElementById(i[l]);if(c){var u=void 0,d=void 0,f=void 0,p=void 0;r.push(i[l]),void 0===c.name?(u=c.id,d=c.getAttribute("name")?c.getAttribute("name"):"",f=void 0===c.value?void 0===c.getAttribute("value")?"":c.getAttribute("value").replace(/\s/g,""):c.value.replace(/\s/g,""),p=void 0===c.innerHTML?"":c.innerHTML):(u=c.id,d=c.name,f=c.value,p=void 0===c.innerHTML?"":c.innerHTML),f=f.replace(/\"/g,""),f=f.replace(/\'/g,""),p=p.replace(/\"/g,""),p=p.replace(/\'/g,"");var g="<"+c.tagName+",id="+u+",name="+d+",value="+f+",outerText="+p+">";s.push(g)}}var h=r.join(","),y=s.join("<UTCSplit|>");e.daemon.DoWebSealByEKey(o,a,h,y,t.id||t,function(t,a,o){"success"===t&&n.success(o),e.errorcallback(n,t,a,o)})})})})},t.EncSignFile=function(t){e.daemon.EncSignFile(t.srcFile,t.certInfo,"1.3.14.3.2.26",t.outFile,t.dn,"1.3.14.3.2.26",function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.SignVerify=function(t){"file"===t.type?e.SignVerify.prototype.FileDetach(t):!1===t.detach?e.SignVerify.prototype.Msg(t):e.SignVerify.prototype.MsgDetach(t)},t.SignMsgDetachVerify=function(t){e.SignVerify.prototype.MsgDetach(t)},t.SignMsgVerify=function(t){e.SignVerify.prototype.Msg(t)},t.SignFileDetachVerify=function(t){e.SignVerify.prototype.FileDetach(t)},t.SignVerify.prototype.MsgDetach=function(t){var n=!1;"msg"===t.stype&&(n=!0),"undefined"===typeof t.certtype&&(t.certtype="RSA"),e.daemon.VerifyStringDetach(t.source,t.data,t.certtype,n,function(n,a,o){"success"===n&&t.success(),e.errorcallback(t,n,a,o)})},t.SignVerify.prototype.Msg=function(t){var n=!1;"msg"===t.stype&&(n=!0),"undefined"===typeof t.certtype&&(t.certtype="RSA"),e.daemon.VerifyString(t.source,t.data,t.certtype,n,function(n,a,o){"success"===n&&t.success(),e.errorcallback(t,n,a,o)})},t.SignVerify.prototype.FileDetach=function(t){"undefined"===typeof t.type&&(t.type="RSA"),e.daemon.VerifyFileSign(t.data,t.type,t.path,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.SealFormVerify=function(t){e.daemon.DoWebSealGetBoundId(t.data,function(n,a,o){if("success"===n){for(var i=o.split(","),r=[],s=0;s<i.length;s++){var l=document.getElementById(i[s]);if(l){var c=void 0,u=void 0,d=void 0,f=void 0;void 0===l.name?(c=l.id,u=l.getAttribute("name")?l.getAttribute("name"):"",d=void 0===l.value?void 0===l.getAttribute("value")?"":l.getAttribute("value").replace(/\s/g,""):l.value.replace(/\s/g,""),f=void 0===l.innerHTML?"":l.innerHTML):(c=l.id,u=l.name,d=l.value,f=void 0===l.innerHTML?"":l.innerHTML),d=d.replace(/\"/g,""),d=d.replace(/\'/g,""),f=f.replace(/\"/g,""),f=f.replace(/\'/g,"");var p="<"+l.tagName+",id="+c+",name="+u+",value="+d+",outerText="+f+">";r.push(p)}}e.daemon.DoWebSealVerify(r.join("<UTCSplit|>"),t.data,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})}e.errorcallback(t,n,a,o)})},t.Envelope=function(t){"file"===t.type?e.Envelope.prototype.File(t):e.Envelope.prototype.Msg(t)},t.EnvelopMsg=function(t){e.Envelope.prototype.Msg(t)},t.EnvelopFile=function(t){e.Envelope.prototype.File(t)},t.Envelope.prototype.File=function(t){var n,a;"SM4"===t.basealg?(n="SM2",a="1.2.840.113549.3.4"):(t.basealg,n="RSA",a="1.2.840.113549.3.4"),"undefined"===typeof t.suf&&(t.suf="enc"),e.daemon.EncryptFileCMSEnvelopeEx_ByCert(t.base,n,t.path,t.path+"."+t.suf,a,function(n,a,o){"success"===n&&t.success(t.path+"."+t.suf),e.errorcallback(t,n,a,o)})},t.Envelope.prototype.Msg=function(t){var n,a;"SM4"===t.basealg?(n="SM2",a="1.2.840.113549.3.4"):(t.basealg,n="RSA",a="1.2.840.113549.3.4"),e.daemon.EncryptMsgCMSEnvelopeEx_ByCert(t.data,t.base,n,a,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.EnvelopMsgByKey=function(t){e.daemon.EnvelopMsgByKey(t.data,t.dn,t.alg,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.EnvelopFileByCer=function(t){e.daemon.EnvelopFileByCer(t.path,t.certinfo,t.outpath,t.alg,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.EnvelopFileByKey=function(t){e.daemon.EnvelopFileByKey(t.path,t.dn,t.outpath,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.DecEnvelopedMsg=function(t){e.daemon.DecEnvelopedMsg(t.data,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.DecEnvelopedFile=function(t){e.daemon.DecEnvelopedFile(t.path,t.outpath,t.symkey,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.GetPdfStdSealDataByKey=function(t){e.daemon.GetPdfStdSealDataByKey(t.hash,t.dn,t.pin,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.GetPdfStdSealDataByPfx=function(t){e.daemon.GetPdfStdSealDataByPfx(t.hash,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.DoPdfStdSealByKeyAtPos=function(t){e.daemon.DoPdfStdSealByKeyAtPos(t.path,t.dn,t.pin,t.seal,t.page,t.x,t.y,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.DoPdfStdSealByKeyAtKw=function(t){e.daemon.DoPdfStdSealByKeyAtKw(t.path,t.dn,t.pin,t.seal,t.kw,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.DoWordStdSealByKeyAtPos=function(t){e.daemon.DoWordStdSealByKeyAtPos(t.path,t.page,t.x,t.y,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.DoExcelStdSealByKeyAtPos=function(t){e.daemon.DoExcelStdSealByKeyAtPos(t.path,t.page,t.x,t.y,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.GetLocalCert=function(t){e.daemon.GetLocalCert(function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.VerifySeal=function(t){e.daemon.VerifySeal(t.path,function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.GetKeyCount=function(t){e.daemon.GetKeyCount(function(n,a,o){"success"===n&&t.success(o),e.errorcallback(t,n,a,o)})},t.ApiInit=function(){e=this}}function UTCMiddleWare_Tool(){var e=this;e.loadcss=function(e,t){if(!e||0===e.length)throw new Error('argument "path" is required !');for(var n=!0,a=0;a<document.querySelectorAll("script").length;a++)document.querySelectorAll("script")[a].src.indexOf(e)>=0&&(n=!1);if(n){var o=document.getElementsByTagName("head")[0],i=document.createElement("link");i.href=e,i.rel="stylesheet",i.type="text/css",o.appendChild(i);var r=document.createElement("script");r.onload=r.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{t()}catch(e){}r.onload=r.onreadystatechange=null}}else try{t()}catch(s){}},e.loadjs=function(e,t){if(!e||0===e.length)throw new Error('argument "path" is required !');for(var n=!0,a=0;a<document.querySelectorAll("script").length;a++)document.querySelectorAll("script")[a].src.indexOf(e)>=0&&(n=!1);if(n){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.src=e,i.type="text/javascript",o.appendChild(i),i.onload=i.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{t(!0)}catch(e){}i.onload=i.onreadystatechange=null},i.onerror=function(){try{t(!1)}catch(e){}}}else try{t(!0)}catch(r){}},e.typearray=function(e){for(var t,n=navigator.userAgent,a=n.split(" "),o=!1,i=0;i<a.length;i++){var r=a[i];RegExp(e).test(r)&&(o=!0,t=i)}return{type:o,num:t}},e.Ie7=function(){var t=navigator.userAgent,n=t.split(" ");if(e.typearray("MSIE").type){var a=e.typearray("MSIE").num,o=/^\d+\.\d+/,i=o.exec(n[a+1].replace(/[^0-9.]/gi,""));return UTCMiddleWare.vnum=o.exec(n[a+1].replace(/[^0-9.]/gi,"")),i<8}},e.Browser=function(){var e=navigator.userAgent;return e.indexOf("Firefox")>=0?"Firefox":e.indexOf("Edge")>=0?"Edge":e.indexOf("Trident")>=0?"IE":e.indexOf("Opera")>=0?"Opera":e.indexOf("Chrome")>=0?"Chrome":e.indexOf("Safari")>=0?"Safari":"Other"},e.randomnum=function(e){for(var t="",n=1;n<=e;n++){var a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],o=new Date,i=Math.floor(o.getMilliseconds()/1e3*16);t+=a[i]}return t},e.endWith=function(e,t){return!(null===t||""===t||0===e.length||t.length>e.length)&&e.substring(e.length-t.length)===t},e.fromBase64=function(e){for(var t=window.atob(e),n=t.length,a=new Uint8Array(new ArrayBuffer(n)),o=0;o<n;o++)a[o]=t.charCodeAt(o);return a}}function UTCMiddleWare_Daemon(){var e=this,t=UTCMiddleWare;e.PluginVersion=function(e){UTCMiddleWare.LocalAjaxPost({function:"PluginVersion",value:{proID:t.code}},function(t,n,a){e(t,n,a)})},e.GetAuxCtlVer=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetAuxCtlVer",value:{proID:t.code}},function(t,n,a){e(t,n,a)})},e.GetKeyHWInfos=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetKeyHWInfos",value:{proID:t.code}},function(t,n,a){e(t,n,a)})},e.GetAEKeyID=function(e){UTCMiddleWare.LocalAjaxPost({function:"getKeyID",value:{proID:t.code}},function(t,n,a){e(t,n,a)})},e.getKeyCert=function(e){UTCMiddleWare.LocalAjaxPost({function:"getCert",value:{proID:t.code}},function(t,n,a){e(t,n,a)})},e.GetLocalCert=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetLocalCertDn",value:{proID:t.code}},function(t,n,a){e(t,n,a)})},e.GetLocalFilePath=function(e,n){UTCMiddleWare.LocalAjaxPost({function:"GetLocalFilePath",value:{proID:t.code}},function(e,t,a){n(e,t,a)})},e.OpenEKey=function(e,n){UTCMiddleWare.LocalAjaxPost({function:"ChkKeyPin",value:{pin:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.ChangePIN=function(e,n,a){UTCMiddleWare.LocalAjaxPost({function:"ChangePin",value:{oPin:e,nPin:n,proID:t.code}},function(e,t,n){a(e,t,n)})},e.SignString=function(e,n,a,o,i,r,s){UTCMiddleWare.LocalAjaxPost({function:"SignMsg",value:{pin:e,data:o,dn:n||"",hashAlg:i,proID:t.code}},function(e,t,n){s(e,t,n)})},e.SignStringDetach=function(e,n,a,o,i,r,s){UTCMiddleWare.LocalAjaxPost({function:"SignMsgDetached",value:{pin:e,data:o,dn:n||"",hashAlg:i,proID:t.code}},function(e,t,n){s(e,t,n)})},e.VerifyString=function(e,n,a,o,i){UTCMiddleWare.LocalAjaxPost({function:"VerifyMsg",value:{signVal:n,proID:t.code}},function(e,t,n){i(e,t,n)})},e.VerifyStringDetach=function(e,n,a,o,i){UTCMiddleWare.LocalAjaxPost({function:"VerifyMsgDetached",value:{signVal:n,data:e,proID:t.code}},function(e,t,n){i(e,t,n)})},e.DoSignFile=function(e,n,a,o,i){UTCMiddleWare.LocalAjaxPost({function:"SignFileDetachedToMsg",value:{pin:e,srcFile:a,dn:n||"",hashAlg:o,proID:t.code}},function(e,t,n){i(e,t,n)})},e.DoSignFile2=function(e,n,a,o,i,r){UTCMiddleWare.LocalAjaxPost({function:"SignFile",value:{pin:e,srcFile:a,outFile:i,dn:n||"",hashAlg:o,proID:t.code}},function(e,t,n){r(e,t,n)})},e.EncSignFile=function(e,t,n,a,o,i,r){UTCMiddleWare.LocalAjaxPost({function:"EncSignFile",value:{srcFile:e,certInfo:t,encAlg:n,outFile:a,dn:o,hashAlg:i}},function(e,t,n){r(e,t,n)})},e.VerifyFileSign=function(e,n,a,o){UTCMiddleWare.LocalAjaxPost({function:"VerifyFileDetached",value:{signVal:e,srcFile:a,proID:t.code}},function(e,t,n){o(e,t,n)})},e.VerifyFilesSign=function(e,n,a){UTCMiddleWare.LocalAjaxPost({function:"VerifyFileDetached",value:{signValFile:n,srcFiles:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.EncryptMsgCMSEnvelopeEx_ByCert=function(e,n,a,o,i){var r=n.replace(/=/gi,"#");UTCMiddleWare.LocalAjaxPost({function:"EnvelopMsg",value:{data:e,certInfo:r,encAlg:o,proID:t.code}},function(e,t,n){i(e,t,n)})},e.EncryptFileCMSEnvelopeEx_ByCert=function(e,n,a,o,i,r){var s=e.replace(/=/gi,"#");UTCMiddleWare.LocalAjaxPost({function:"EnvelopFile",value:{srcFile:a,outFile:o,certInfo:s,encAlg:i,proID:t.code}},function(e,t,n){r(e,t,n)})},e.EnvelopMsgByKey=function(e,n,a,o){UTCMiddleWare.LocalAjaxPost({function:"EnvelopMsgByKey",value:{data:e,dn:n,encAlg:a,proID:t.code}},function(e,t,n){o(e,t,n)})},e.EnvelopFileByCer=function(e,n,a,o,i){UTCMiddleWare.LocalAjaxPost({function:"EnvelopFileByCer",value:{srcFile:e,certinfo:n,outFile:a,encAlg:o,proID:t.code}},function(e,t,n){i(e,t,n)})},e.EnvelopFileByKey=function(e,n,a,o){UTCMiddleWare.LocalAjaxPost({function:"EnvelopFileByKey",value:{srcFile:e,dn:n,outFile:a,proID:t.code}},function(e,t,n){o(e,t,n)})},e.DecEnvelopedMsg=function(e,n){UTCMiddleWare.LocalAjaxPost({function:"DecEnvelopedMsg",value:{strSymKeyEnvelope:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.DecEnvelopedFile=function(e,n,a,o){UTCMiddleWare.LocalAjaxPost({function:"DecEnvelopedFile",value:{encFile:e,decFile:n,strSymKeyEnvelope:a,proID:t.code}},function(e,t,n){o(e,t,n)})},e.DoWebSealByEKey=function(e,n,a,o,i,r){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealByEKey",value:{dn:e,password:n,boundID:a,boundVal:o,dataID:i,proID:t.code}},function(e,t,n){r(e,t,n)})},e.DoWebSealGetBoundId=function(e,n){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealGetBoundId",value:{sealinfo:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.DoWebSealVerify=function(e,n,a){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealVerify",value:{val:e,sealinfo:n,proID:t.code}},function(e,t,n){a(e,t,n)})},e.GetPdfStdSealDataByKey=function(e,n,a,o){UTCMiddleWare.LocalAjaxPost({function:"GetPdfStdSealDataByKey",value:{fileAbs:e,pwd:a,keyDn:n,proID:t.code}},function(e,t,n){o(e,t,n)})},e.GetPdfStdSealDataByPfx=function(e,n){UTCMiddleWare.LocalAjaxPost({function:"GetPdfStdSealDataByPfx",value:{fileAbs:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.DoPdfStdSealByKeyAtPos=function(e,n,a,o,i,r,s,l){UTCMiddleWare.LocalAjaxPost({function:"DoPdfStdSealByKeyAtPos",value:{sourceFile:e,pinCode:a,dnName:n,imgBase64:o,pageNo:i,xPosition:r,yPosition:s,proID:t.code}},function(e,t,n){l(e,t,n)})},e.DoPdfStdSealByKeyAtKw=function(e,n,a,o,i,r){UTCMiddleWare.LocalAjaxPost({function:"DoPdfStdSealByKeyAtKw",value:{sourceFile:e,pinCode:a,dnName:n,imgBase64:o,charString:i,proID:t.code}},function(e,t,n){r(e,t,n)})},e.DoWordStdSealByKeyAtPos=function(e,n,a,o,i){UTCMiddleWare.LocalAjaxPost({function:"DoSealInWordByCoord",value:{sSourceFile:e,xPosition:a,yPosition:o,pageNo:n,proID:t.code}},function(e,t,n){i(e,t,n)})},e.DoExcelStdSealByKeyAtPos=function(e,n,a,o,i){UTCMiddleWare.LocalAjaxPost({function:"DoSealInExcelByCoord",value:{sSourceFile:e,xPosition:a,yPosition:o,pageNo:n,proID:t.code}},function(e,t,n){i(e,t,n)})},e.GetEKeyPic=function(e,n){UTCMiddleWare.LocalAjaxPost({function:"GetSealImage",value:{pin:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.VerifySeal=function(e,n){UTCMiddleWare.LocalAjaxPost({function:"VerifySeal",value:{pdfFile:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.GetKeyCount=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetKeyCount",value:{proID:t.code}},function(t,n,a){e(t,n,a)})}}UTCMiddleWare_Function.prototype=new UTCMiddleWare_Api;var UTCMiddleWare=new UTCMiddleWare_Function;UTCMiddleWare.Initialize(),__webpack_exports__["a"]=UTCMiddleWare},2:function(e,t){},"2b2d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("div",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchPdf}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.patchSignPosition}},[e._v("按位置批签")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.patchSignKeyWord}},[e._v("按关键字批签")])],1)]),e._v(" "),n("el-main",[n("el-table",{staticStyle:{width:"100%","line-height":"20px"},attrs:{data:e.pdfList,size:"small",height:"calc(100vh - 198px)",border:""},on:{"selection-change":e.changeFun}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fileId",label:"文件id",width:"190"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fileName",label:"文件名","min-width":"190"}}),e._v(" "),n("el-table-column",{attrs:{prop:"lastTime",label:"时间","min-width":"190"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fileSize",label:"文件大小","min-width":"190"}}),e._v(" "),n("el-table-column",{attrs:{prop:"hasSign",label:"是否已签章","min-width":"190"}}),e._v(" "),n("el-table-column",{attrs:{prop:"",width:"190",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.signSingleM(t)}}},[e._v("签章")])]}}])})],1),e._v(" "),n("div",{staticClass:"block",staticStyle:{"line-height":"2px"}},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,30,40],"page-size":e.queryParam.pageInfo.size,layout:"total, sizes, prev, pager, next, jumper",total:e.queryParam.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"按位置批签",visible:e.dialogPositionVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogPositionVisible=t}}},[n("el-form",{ref:"patchPositionParam",attrs:{model:e.patchPositionParam,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"签署类型",prop:"signType"}},[n("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署类型"},model:{value:e.patchPositionParam.signType,callback:function(t){e.$set(e.patchPositionParam,"signType",t)},expression:"patchPositionParam.signType"}},[n("el-option",{attrs:{label:"签名",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"签章",value:"1"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[n("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:""},model:{value:e.patchPositionParam.pin,callback:function(t){e.$set(e.patchPositionParam,"pin",t)},expression:"patchPositionParam.pin"}})],1)],1),e._v(" "),n("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.positionSignSure}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"按位置批签",visible:e.dialogKeywordVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogKeywordVisible=t}}},[n("el-form",{ref:"patchKeywordParam",attrs:{model:e.patchKeywordParam,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[n("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:"请输入关键字"},model:{value:e.patchKeywordParam.keyword,callback:function(t){e.$set(e.patchKeywordParam,"keyword",t)},expression:"patchKeywordParam.keyword"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"偏移方位",prop:"isDeviation"}},[n("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择相对于关键字偏移方位"},model:{value:e.patchKeywordParam.isDeviation,callback:function(t){e.$set(e.patchKeywordParam,"isDeviation",t)},expression:"patchKeywordParam.isDeviation"}},[n("el-option",{attrs:{label:"不偏移",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"向上偏移",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"向下偏移",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"向左偏移",value:"3"}}),e._v(" "),n("el-option",{attrs:{label:"向右偏移",value:"4"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"签署类型",prop:"signType"}},[n("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署类型"},model:{value:e.patchKeywordParam.signType,callback:function(t){e.$set(e.patchKeywordParam,"signType",t)},expression:"patchKeywordParam.signType"}},[n("el-option",{attrs:{label:"签名",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"签章",value:"1"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"签署位置",prop:"signMode"}},[n("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署第几个关键字"},model:{value:e.patchKeywordParam.signMode,callback:function(t){e.$set(e.patchKeywordParam,"signMode",t)},expression:"patchKeywordParam.signMode"}},[n("el-option",{attrs:{label:"签署第一个关键字",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"签署最后一个关键字",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"签署所有关键字",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"签署第二个关键字",value:"3"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[n("el-input",{staticStyle:{width:"75%"},attrs:{"show-password":"",placeholder:"请输入PIN码"},model:{value:e.patchKeywordParam.pin,callback:function(t){e.$set(e.patchKeywordParam,"pin",t)},expression:"patchKeywordParam.pin"}})],1)],1),e._v(" "),n("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.keywordSignSure}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"新一代交易平台电子签章",visible:e.dialogSingleShow,width:"95%",top:"5px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogSingleShow=t}}},[n("iframe",{ref:"child",attrs:{src:e.iframePdf,width:e.iframeWidth,height:e.iframeHigh,frameborder:"0"}})])],1)},o=[],i=(n("ac6a"),n("5df3"),n("f400"),n("d225")),r=n("b0b4"),s=n("b775"),l=function(){function e(){Object(i["a"])(this,e)}return Object(r["a"])(e,null,[{key:"querySeals",value:function(e){return Object(s["a"])({url:"/px-common-signature/signSealManage/querySeals",method:"post",data:e})}},{key:"queryScene",value:function(){return Object(s["a"])({url:"/px-common-signature/searchScene/queryScene",method:"post"})}},{key:"changeStatus",value:function(e){return Object(s["a"])({url:"/px-common-signature/signSealManage/updateStatus",method:"post",data:e})}},{key:"sealStart",value:function(){return Object(s["a"])({url:"/px-common-signature/pdfView",method:"post"})}},{key:"getPdfList",value:function(e){return Object(s["a"])({url:"/px-common-signature/getPdfList",method:"post",data:e})}}]),e}(),c=(n("ac4d"),n("8a81"),n("1fa89")),u=n("5c96"),d=function(){function e(){Object(i["a"])(this,e)}return Object(r["a"])(e,null,[{key:"patchPositionOrKeyword",value:function(t,n){console.log("获取的值为:"+t),console.log("检测钥匙Pin码，事件绑定成功");var a=t.signType,o=t.pin,i=t.selectFiles;console.log("转化后的值为"+i);var r="{",s=!0,l=!1,u=void 0;try{for(var d,f=i.entries()[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value;r=r+'"'+p[0]+'":"'+p[1]+'",'}}catch(x){l=!0,u=x}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}r=r.substr(0,r.length-1)+"}",console.log("拼接后字符串为:"+r);var g,h,y,_,m,v,S,P,b=new Map,M=new Array,w=new Array;void 0===t.keyword?(v=t.patchPosition.p,S=t.patchPosition.x,P=t.patchPosition.y):(y=t.keyword,_=t.signMode,m=t.isDeviation),console.log("进入签章方法"+a+":"+S+":"+P+":"+v);var D=new Promise(function(t){c["a"].OpenKey({pin:o,success:function(n){console.log("pin码正确"),c["a"].GetCertInfo({success:function(e){console.log(JSON.stringify(e));var t=JSON.stringify(e),n=new Function("return"+t)();g=n[0].DN,console.log(g)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}});var i=new Promise(function(t){c["a"].GetSealInfo({pin:o,success:function(n){var i=null;"1"===a?a="11":"0"===a&&(a="12");for(var s=0;s<n.length;s++)if(n[s].id===a){i=n[s].value;break}if(void 0===y||null===y||""===y){var l={xPos:S,yPos:P,sealInfoBase64:i,strReason:"",strLocation:"",fileInfos:{fileInfos:r},pageNo:v},c=new Promise(function(t){e.getPdfStdDigests(l).then(function(n){if(0===n.status){h=n.data;var a=new Promise(function(t){e.patchSign(b,w,M,h,o,g).then(function(e){t(e)})});t(a)}else e.failMessage("获取摘要信息，接口调用失败")})});t(c)}else{var u,d;if(void 0!=m&&null!=m)switch(m){case"0":u=0,d=0;break;case"1":u=0,d=-16;break;case"2":u=0,d=8;break;case"3":u=-10,d=0;break;case"4":u=10,d=0;break;default:u=0,d=0;break}else u=0,d=0;var f={xPos:u,yPos:d,sealInfoBase64:i,strReason:"",strLocation:"",fileInfos:{fileInfos:r},keyStr:y,signMode:_},p=new Promise(function(t){e.getPdfStdDigestOnKws(f).then(function(n){if(0===n.status){h=n.data;var a=new Promise(function(t){e.patchSign(b,w,M,h,o,g).then(function(e){t(e)})});t(a)}else e.failMessage("获取摘要信息，接口调用失败")})});t(p)}},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});t(i)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});return D}},{key:"signPdf",value:function(t,n,a,o,i,r,s){c["a"].GetPdfStdSealDataByKey({hash:a,dn:o,pin:i,success:function(a){var o={fileName:n,signInfo:a};e.sealStdPdfReturnByte(o).then(function(a){if(0===a.status)if(0==a.data.status){var o={fileId:t,fileName:n,message:"文件签章成功"};r.push(o)}else{var i={fileId:t,fileName:n,message:a.data.message};s.push(i)}else{var l={fileId:t,fileName:n,message:"生成签章数据接口调用失败"};s.push(l),e.failMessage("生成签章数据接口调用失败")}}).catch(function(e){console.log("阻止事件冒泡"+e);var a={fileId:t,fileName:n,message:e};s.push(a)}).then(function(e){console.log("阻止promise冒泡")})},fail:function(a){var o={fileId:t,fileName:n,message:a};s.push(o),e.failMessage(a)},error:function(a){var o={fileId:t,fileName:n,message:a};s.push(o),e.errorMessage(a)}})}},{key:"getPdfStdDigests",value:function(e){return Object(s["a"])({url:"/px-common-signature/signSealManage/getPdfStdDigests",method:"post",data:e})}},{key:"getPdfStdDigestOnKws",value:function(e){return Object(s["a"])({url:"/px-common-signature/signSealManage/getPdfStdDigestOnKws",method:"post",data:e})}},{key:"sealStdPdfReturnByte",value:function(e){return Object(s["a"])({url:"/px-common-signature/signSealManage/sealStdPdfReturnByte",method:"post",data:e})}},{key:"failMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"errorMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"patchSign",value:function(t,n,a,o,i,r){for(var s=0,l=0;l<o.length;l++){var c=void 0,u=void 0,d=void 0;if(s+=1,!0===o[l].digestStatus)c=o[l].digest,u=o[l].fileName,d=o[l].fileId,e.signPdf(d,u,c,r,i,a,n);else{var f={fileId:o[l].fileId,fileName:o[l].fileName,message:o[l].digest};n.push(f)}}if(s>=o.length)return setTimeout(function(){},2e3),new Promise(function(e){t.set("success",a),t.set("error",n),e(t)})}}]),e}(),f={fileId:"",fileName:"",lastTime:"",fileSize:"",hasSign:""},p={name:"Approval",data:function(){return{dialogPositionVisible:!1,dialogSingleShow:!1,dialogKeywordVisible:!1,passForm:!1,iframeWidth:"",iframeHigh:"",iframePdf:"",baseURL:"http://192.100.2.64:12012",signSingle:Object.assign({},f),pdfList:[],currentPage:1,queryParam:{data:{fileIds:["1","2","3"]},pageInfo:{pageNum:1,pageSize:2,size:0,startRow:1,endRow:1,pages:0,prePage:0,nextPage:0,isFirstPage:!0,isLastPage:!0,hasPreviousPage:!1,navigatePages:0,navigatepageNums:[],navigateFirstPage:1,navigateLastPage:1,total:0}},selectList:[],patchPositionParam:{selectFiles:new Map,patchPosition:{},signType:"",pin:""},patchKeywordParam:{selectFiles:new Map,keyword:"",isDeviation:"",signMode:"",signType:"",pin:""}}},watch:{},mounted:function(){this.queryPage(this.queryParam),window.addEventListener("message",this.handleMessage)},methods:{queryPage:function(e){var t=this;l.getPdfList(e).then(function(e){t.pdfList=e.data.list,t.queryParam.pageInfo=e.data})},searchPdf:function(){this.queryPage(this.queryParam)},handleClose:function(e){e()},signSingleM:function(e){e.$index;var t=e.row;console.log(t.fileId);var n=t.fileId;this.dialogSingleShow=!0,this.iframePdf=this.baseURL+"/px-common-signature/pdfView?id="+n;var a=document.body.scrollWidth,o=document.body.scrollHeight;a<985&&(a=985),this.iframeWidth=.9*a,this.iframeHigh=.78*o},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.queryParam.pageInfo.pageSize=e,this.queryPage(this.queryParam)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.queryParam.pageInfo.pageNum=e-1,this.queryPage(this.queryParam)},patchSignPosition:function(){var e="";null!=this.selectList&&0!==this.selectList.length&&(e=this.selectList[0].fileId),this.dialogSingleShow=!0,this.iframePdf=this.baseURL+"/px-common-signature/pdfView?id="+e+"&type=pSign";var t=document.body.scrollWidth,n=document.body.scrollHeight;t<985&&(t=985),this.iframeWidth=.9*t,this.iframeHigh=.78*n},patchSignKeyWord:function(){this.dialogKeywordVisible=!0},changeFun:function(e){this.selectList=e},handleMessage:function(e){var t=e.data;switch(t.cmd){case"returnSingleSign":console.log("单签结果");break;case"returnPosition":console.log("按位置批签位置"),!0===t.params.success&&(this.dialogSingleShow=!1,this.dialogPositionVisible=!0,this.patchPositionParam.patchPosition=t.params.data,console.log(this.patchPositionParam.patchPosition));break}},positionSignSure:function(){var e=this;this.patchPositionParam.selectFiles=new Map,console.log("签章位置"+this.patchPositionParam.patchPosition);for(var t=0;t<this.selectList.length;t++)this.patchPositionParam.selectFiles.set(this.selectList[t].fileId,this.selectList[t].fileName);console.log("待签章的文件为:"+JSON.stringify(this.patchPositionParam.selectFiles)),d.patchPositionOrKeyword(this.patchPositionParam).then(function(t){console.log(t),console.log(t.get("success")),console.log(t.get("error")),e.dialogPositionVisible=!1,e.resetForm("patchPositionParam")})},keywordSignSure:function(){var e=this;this.patchKeywordParam.selectFiles=new Map;for(var t=0;t<this.selectList.length;t++)this.patchKeywordParam.selectFiles.set(this.selectList[t].fileId,this.selectList[t].fileName);console.log(this.patchKeywordParam.selectFiles),d.patchPositionOrKeyword(this.patchKeywordParam).then(function(t){console.log(t),console.log(t.get("success")),console.log(t.get("error")),e.dialogKeywordVisible=!1,e.resetForm("patchKeywordParam")})},resetForm:function(e){this.$refs[e].resetFields()}}},g=p,h=(n("4167"),n("2877")),y=Object(h["a"])(g,a,o,!1,null,"6553e121",null);t["default"]=y.exports},3:function(e,t){},4167:function(e,t,n){"use strict";var a=n("ecfa"),o=n.n(a);o.a},"4bf8d":function(e,t,n){"use strict";n("6b54"),n("ac6a"),n("75fc"),n("34ef"),n("1146");n("0fd4")},ecfa:function(e,t,n){}}]);