(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3639c72"],{1:function(e,t){},"1fa89":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("34ef"),core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_5__),_vendor_Export2Excel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4bf8d");function UTCMiddleWare_Function(){var self=this;self.code="pRLXrMwv6PpRY1iCfNqBpoglbQ3M9KNMF81sRqyAQ0lF6QTzmbGLBunPf8waWKV9OdxAJwIMVwD4K2pCm/1D5qeZuNYxiBA0QVOqge8wTVRVBQVYvNHSmfvHvIsSGfQnK/dsRkqsF8Nf9safhGXmhrINzi1ftHQrCWNXEzmNufg=",self.version="",self.isloading=!0,self.loadingflag=null,self.usekey=!1,self.vnum=null,self.initsure=!0,self.errorstate={117440512:"（第三方错误/系统错误)",117440513:"请先启动电子钥匙辅助控件",117440514:"电子钥匙辅助控件请求超时",117440515:"电子钥匙辅助控件拒绝访问",117440516:"缺少参数或参数格式错误",117440517:"没有找到指定挂载的接口库",117440518:"参数格式错误无法解析",117440519:"无法连接外部服务",117440520:"外部服务请求超时",117440521:"外部服务拒绝访问",117440528:"取消选择印章",117440522:"钥匙中缺少公章信息",117440523:"钥匙中缺少法人章/签字信息",117440524:"没有符合筛选条件的证书",117440525:"钥匙中缺少印章信息",117440526:"请勿同时插入多把电子钥匙",50331656:"PIN码不正确",50331652:"请输入6位数PIN码"},self.AddPlugin=function(json){var pluginlist=["Inside","Evaluate","Idcard","Ui","Hidden"];function loop(num){eval("json."+pluginlist[num].toLowerCase())?self.tool.loadjs(eval("json."+pluginlist[num].toLowerCase()),function(bool){if(bool)try{eval("self."+pluginlist[num]+"=new UTCMiddleWare_"+pluginlist[num]+"()"),json.success("UTCMiddleWare."+pluginlist[num])}catch(e){json.fail("0x07000005",self.errorstate[117440517]+","+e.message)}else json.fail("0x07000005",self.errorstate[117440517]);num<pluginlist.length-1&&(num++,loop(num))}):num<pluginlist.length-1&&(num++,loop(num))}loop(0)},self.successcallback=function(e,t){"function"===typeof e.success||"function"===typeof e.finish?e.success(t):alert(t)},self.errorcallback=function(e,t,a,n){"fail"===t&&("function"!==typeof e.fail&&"function"!==typeof e.finish||e.fail(a,n)),"error"===t&&("function"!==typeof e.error&&"function"!==typeof e.finish||e.error(a,n))},self.LocalAjaxPost=function(json,callback){try{try{eval("json = '"+JSON.stringify(json)+"';")}catch(e){return callback("fail","0x07000006",self.errorstate[117440518]),!1}var url="http://127.0.0.1:58902/UTCDaemon/",shitie;if("https:"===document.location.protocol&&(url="https://daemon.utcsoft.com:58912/UTCDaemon/"),navigator.userAgent.indexOf("Trident/")>=0)shitie=window.ActiveXObject&&self.vnum<9?new ActiveXObject("Microsoft.XMLHttp"):new XMLHttpRequest,shitie.open("Get",url,!0),shitie.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),shitie.onreadystatechange=function(){4===shitie.readyState&&postfn()},shitie.send();else postfn()}catch(e){callback("fail","0x07000001",self.errorstate[117440513])}function postfn(){var e;e=window.ActiveXObject&&self.vnum<9?new ActiveXObject("Microsoft.XMLHttp"):new XMLHttpRequest,e.open("POST",url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var t=JSON.parse(e.responseText);"0"===t.code?callback("success",t.code,t.result):callback("fail",t.code,t.errormsg)}else callback("fail","0x07000001",self.errorstate[117440513])},json=json.replace(/\\/gi,"\\\\"),e.send("json="+json)}},self.WebAjaxPost=function(e,t){try{var a=e.url,n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var e=JSON.parse(n.responseText);t("success",e)}else t("fail","0x07000007",self.errorstate[117440519])},e=function(e){var t="";for(var a in e)t+=a+"="+e[a]+"&";return t=t.substring(0,t.length-1),t}(e),n.send(e)}catch(i){t("fail","0x07000007",self.errorstate[117440519])}},self.Initialize=function(e){self.initsure&&(self.initsure=!1,self.tool=new UTCMiddleWare_Tool,self.daemon=new UTCMiddleWare_Daemon,self.tool.Ie7()&&alert("请使用IE8及以上内核的浏览器或非IE内核浏览器"),self.ApiInit());try{e.success()}catch(t){}}}function UTCMiddleWare_Api(){var e=null,t=this;t.GetVersion=function(t){e.daemon.GetAuxCtlVer(function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.GetKeyInfo=function(t){e.GetKeyInfo.prototype.Id(t)},t.GetKeyInfo.prototype.All=function(t){e.daemon.GetKeyCount(function(a,n,i){"success"===a&&(1!==i?e.errorcallback(t,"fail","0x0700000E",e.errorstate[117440526]):e.daemon.GetKeyHWInfos(function(a,n,i){"success"===a&&(i.id=i.serialnumber,e.successcallback(t,i)),e.errorcallback(t,a,n,i)})),e.errorcallback(t,a,n,i)})},t.GetKeyInfo.prototype.Id=function(t){e.daemon.GetAEKeyID(function(a,n,i){if("success"===a&&""===i&&(a="fail",i="没有检测到钥匙"),"success"===a)switch(t.content){case"id":e.successcallback(t,i);break;default:e.successcallback(t,{id:i})}e.errorcallback(t,a,n,i)})},t.GetKeyCertInfo=function(t){e.GetCertInfo.prototype.All(t)},t.GetCertInfo=function(t){e.GetCertInfo.prototype.All(t)},t.GetCertInfo.prototype.All=function(a){e.daemon.getKeyCert(function(n,i,o){if("success"===n){for(var s=0;s<o.length;s++)o[s].SubjectDN=o[s].SubjectName,o[s].DN=o[s].SubjectName,o[s].IssuerDN=o[s].IssuerName,o[s].SN=o[s].SerialNumber,o[s].Date=o[s].NotBefore.replace("-","/").replace("-","/").replace("T"," ")+"-"+o[s].NotAfter.replace("-","/").replace("-","/").replace("T"," ");if(o=t.GetCertInfo.prototype.screen(a,o,a.code,a.name),!o)return!1;a.success(o)}e.errorcallback(a,n,i,o)})},t.GetCertInfo.prototype.screen=function(t,a,n,i){var o=[];if(void 0!==n)for(var s=0;s<a.length;s++){var r=a[s].DN.split("@");r[1]===n&&o.push(a[s])}else o=a;var l=[];if(void 0!==i)for(var c=0;c<o.length;c++){var u=a[c].DN.split("@");u[2]===i&&l.push(o[c])}else l=o;return 0===l.length?(e.errorcallback(t,"fail","0x0700000C",e.errorstate[117440524]),!1):l},t.GetFilePath=function(t){"undefined"===typeof t.suf&&(t.suf="*"),document.querySelectorAll("body")[0].style.cursor="no-drop",document.querySelectorAll("body")[0].style.pointerEvents="none",e.daemon.GetLocalFilePath(t.suf,function(a,n,i){document.querySelectorAll("body")[0].style.cursor="auto",document.querySelectorAll("body")[0].style.pointerEvents="auto","success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.OpenKey=function(t){e.OpenKey.prototype.OpenEKey(t)},t.OpenKey.prototype.OpenEKey=function(t){void 0===t.pin||""===t.pin?e.errorcallback(t,"fail","0x07000004",e.errorstate[117440516]):t.pin.length>=6&&t.pin.length<=16?e.daemon.OpenEKey(t.pin,function(a,n,i){"success"===a&&t.success(t.pin),void 0!==n&&""!==n.toString()&&"0x03000008"===n.toString()&&e.errorcallback(t,a,n,e.errorstate[50331656])}):e.errorcallback(t,"fail","0x03000004",e.errorstate[50331652])},t.ChangePin=function(t){e.daemon.ChangePIN(t.oldpin,t.newpin,function(a,n,i){"success"===a&&t.success(),e.errorcallback(t,a,n,i)})},t.GetCommSealInfo=function(e){e.sealid=[11,14,15],t.GetSealInfo(e)},t.GetCorpSealInfo=function(e){e.sealid=[12],t.GetSealInfo(e)},t.GetSealInfo=function(t){e.daemon.GetEKeyPic(t.pin,function(a,n,i){if("success"===a){var o=[];if(void 0!==t.sealid)for(var s=0;s<i.length;s++)for(var r=0;r<t.sealid.length;r++)t.sealid[r]===i[s].id&&o.push(i[s]);else o=i;0===o.length?void 0!==t.sealid?t.sealid.indexOf(11)>=0?e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522]):t.sealid.indexOf(12)>=0?e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523]):e.errorcallback(t,"fail","0x0700000D",e.errorstate[117440525]):e.errorcallback(t,"fail","0x0700000D",e.errorstate[117440525]):t.success(o)}e.errorcallback(t,a,n,i)})},t.GetSealSignInfo=function(t){e.daemon.GetEKeyPic(t.pin,function(a,n,i){if("success"===a){var o=new Image,s=new Image;s.onload=function(){if(""===o.src||null===o.src||void 0===o.src)return e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522]),!1;if(""===s.src||null===s.src||void 0===s.src)return e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523]),!1;var a=0;"undefined"!==typeof t.dx&&(a=t.dx);var n=0;"undefined"!==typeof t.dy&&(n=t.dy);var i,r,l=document.createElement("canvas");a>=0&&n>=0?o.width>=s.width+a&&s.height+n>=o.height?(r=o.width,i=s.height+n):o.width<s.width+a&&s.height+n<o.height?(r=s.width+a,i=o.height):o.width<s.width+a&&s.height+n>o.height?(r=s.width+a,i=s.height+n):o.width>s.width+a&&s.height+n<o.height&&(r=o.width,i=o.height):a<0&&n>=0?o.height>=s.height+n?(r=o.width+Math.abs(a)+s.width,i=o.height):o.height<s.height+n&&(r=o.width+Math.abs(a)+s.width,i=s.height+n):a<0&&n<0?s.height>=o.height+Math.abs(n)?(r=s.width+Math.abs(a)+o.width,i=s.height):s.height<o.height+Math.abs(n)&&(r=s.width+Math.abs(a)+o.width,i=o.height+Math.abs(n)):a>=0&&n<0&&(o.width>=s.width+Math.abs(a)?(r=o.width,i=o.height+Math.abs(n)+s.height):o.width<s.width+Math.abs(a)&&(r=s.width+Math.abs(a),i=o.height+Math.abs(n)+s.height)),l.height=i,l.width=r;var c,u,d,f,p=l.getContext("2d");if(a<0?(c=Math.abs(a),d=0):(c=0,d=Math.abs(a)),n<0?(u=Math.abs(n),f=0):(u=0,f=Math.abs(n)),p.drawImage(o,c,u,o.width,o.height),p.drawImage(s,d,f,s.width,s.height),"undefined"!==typeof t.date){var g=t.date,h=20;p.font=h+"px Arial";var y=p.measureText(g).width,m=0;"undefined"!==typeof t.datex&&(m=t.datex);var v=0;"undefined"!==typeof t.datey&&(v=t.datey);var _=p.getImageData(0,0,l.width,l.height);y+m>l.width&&(l.width=y+m),h+v>l.height&&(l.height=h+v),p.putImageData(_,0,0),p.font=h+"px Arial",p.fillText(g,m,v)}t.success({img:l.toDataURL()})},o.onload=function(){for(var a=!0,n=0;n<i.length;n++)if("12"===i[n].id){a=!1,s.src="data:image/png;base64,"+i[n].value;break}a&&e.errorcallback(t,"fail","0x0700000B",e.errorstate[117440523])};for(var r=!0,l=0;l<i.length;l++)if("11"===i[l].id){r=!1,o.src="data:image/png;base64,"+i[l].value;break}r&&e.errorcallback(t,"fail","0x0700000A",e.errorstate[117440522])}e.errorcallback(t,a,n,i)})},t.Sign=function(t){"file"===t.type?!1===t.detach?e.Sign.prototype.File(t):!0===t.tofile?e.Sign.prototype.FileDetachToFile(t):e.Sign.prototype.FileDetach(t):!0===t.many?e.Sign.prototype.Msg_many(t):!1===t.detach?e.Sign.prototype.Msg(t):e.Sign.prototype.MsgDetach(t)},t.SignMsgDetach=function(t){e.Sign.prototype.MsgDetach(t)},t.SignMsg=function(t){e.Sign.prototype.Msg(t)},t.SignFileDetach=function(t){e.Sign.prototype.FileDetach(t)},t.SignFile=function(t){e.Sign.prototype.File(t)},t.Sign.prototype.Msg=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.SignString(a,t.dn,"",t.data,t.hash,t.detach,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.Sign.prototype.MsgDetach=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.SignStringDetach(a,t.dn,"",t.data,t.hash,t.detach,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.Sign.prototype.FileDetach=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.DoSignFile(a,t.dn,t.path,t.hash,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.Sign.prototype.FileDetachToFile=function(t){e.notdn(t.dn,function(a,n){"success"===a&&e.notpath(t.data,function(a,i){"success"===a&&("undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26"),"undefined"===typeof t.suf&&(t.suf="sig"),e.daemon.DoSignFile3(n,i,t.hash,i+"."+t.suf,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})),e.errorcallback(t,a,i)}),e.errorcallback(t,a,n)})},t.Sign.prototype.File=function(t){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26"),"undefined"===typeof t.suf&&(t.suf="sig");var a="";"undefined"!==typeof t.pin&&(a=t.pin),e.daemon.DoSignFile2(a,t.dn,t.path,t.hash,t.path+"."+t.suf,function(a,n,i){"success"===a&&t.success(t.path+"."+t.suf),e.errorcallback(t,a,n,i)})},t.Sign.prototype.Msg_many=function(t){e.Sign.prototype.Msg_time=0,e.Sign.prototype.Msg_data=t.data,e.iscert(t.dn,t,function(a){e.Sign.prototype.Msg_loop(t,a)})},t.Sign.prototype.Msg_loop=function(t,a){"undefined"===typeof t.hash&&(t.hash="1.3.14.3.2.26");var n="";"undefined"!==typeof t.pin&&(n=t.pin),e.daemon.SignStringDetach(n,a,"",t.data[e.Sign.prototype.Msg_time].hashValue,t.hash,t.detach,function(n,i,o){"success"===n&&(e.Sign.prototype.Msg_data[e.Sign.prototype.Msg_time].keyString=o,e.Sign.prototype.Msg_time++,e.Sign.prototype.Msg_time>e.Sign.prototype.Msg_data.length-1||0===e.Sign.prototype.Msg_data.length?e.Sign.prototype.Msg_finish(t):e.Sign.prototype.Msg_loop(t,a)),e.errorcallback(t,n,i,o)})},t.Sign.prototype.Msg_finish=function(t){t.success(e.Sign.prototype.Msg_data)},t.Sign.prototype.Msg_time=0,t.Sign.prototype.Msg_data=[],t.SealFormKey=function(a){t.ispin(a.pin,a,function(n){t.iscert(a.dn,a,function(i){t.isseal(a.seal,n,a,function(t){for(var o=a.id.split(","),s=[],r=[],l=0;l<o.length;l++){var c=document.getElementById(o[l]);if(c){var u=void 0,d=void 0,f=void 0,p=void 0;s.push(o[l]),void 0===c.name?(u=c.id,d=c.getAttribute("name")?c.getAttribute("name"):"",f=void 0===c.value?void 0===c.getAttribute("value")?"":c.getAttribute("value").replace(/\s/g,""):c.value.replace(/\s/g,""),p=void 0===c.innerHTML?"":c.innerHTML):(u=c.id,d=c.name,f=c.value,p=void 0===c.innerHTML?"":c.innerHTML),f=f.replace(/\"/g,""),f=f.replace(/\'/g,""),p=p.replace(/\"/g,""),p=p.replace(/\'/g,"");var g="<"+c.tagName+",id="+u+",name="+d+",value="+f+",outerText="+p+">";r.push(g)}}var h=s.join(","),y=r.join("<UTCSplit|>");e.daemon.DoWebSealByEKey(i,n,h,y,t.id||t,function(t,n,i){"success"===t&&a.success(i),e.errorcallback(a,t,n,i)})})})})},t.EncSignFile=function(t){e.daemon.EncSignFile(t.srcFile,t.certInfo,"1.3.14.3.2.26",t.outFile,t.dn,"1.3.14.3.2.26",function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.SignVerify=function(t){"file"===t.type?e.SignVerify.prototype.FileDetach(t):!1===t.detach?e.SignVerify.prototype.Msg(t):e.SignVerify.prototype.MsgDetach(t)},t.SignMsgDetachVerify=function(t){e.SignVerify.prototype.MsgDetach(t)},t.SignMsgVerify=function(t){e.SignVerify.prototype.Msg(t)},t.SignFileDetachVerify=function(t){e.SignVerify.prototype.FileDetach(t)},t.SignVerify.prototype.MsgDetach=function(t){var a=!1;"msg"===t.stype&&(a=!0),"undefined"===typeof t.certtype&&(t.certtype="RSA"),e.daemon.VerifyStringDetach(t.source,t.data,t.certtype,a,function(a,n,i){"success"===a&&t.success(),e.errorcallback(t,a,n,i)})},t.SignVerify.prototype.Msg=function(t){var a=!1;"msg"===t.stype&&(a=!0),"undefined"===typeof t.certtype&&(t.certtype="RSA"),e.daemon.VerifyString(t.source,t.data,t.certtype,a,function(a,n,i){"success"===a&&t.success(),e.errorcallback(t,a,n,i)})},t.SignVerify.prototype.FileDetach=function(t){"undefined"===typeof t.type&&(t.type="RSA"),e.daemon.VerifyFileSign(t.data,t.type,t.path,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.SealFormVerify=function(t){e.daemon.DoWebSealGetBoundId(t.data,function(a,n,i){if("success"===a){for(var o=i.split(","),s=[],r=0;r<o.length;r++){var l=document.getElementById(o[r]);if(l){var c=void 0,u=void 0,d=void 0,f=void 0;void 0===l.name?(c=l.id,u=l.getAttribute("name")?l.getAttribute("name"):"",d=void 0===l.value?void 0===l.getAttribute("value")?"":l.getAttribute("value").replace(/\s/g,""):l.value.replace(/\s/g,""),f=void 0===l.innerHTML?"":l.innerHTML):(c=l.id,u=l.name,d=l.value,f=void 0===l.innerHTML?"":l.innerHTML),d=d.replace(/\"/g,""),d=d.replace(/\'/g,""),f=f.replace(/\"/g,""),f=f.replace(/\'/g,"");var p="<"+l.tagName+",id="+c+",name="+u+",value="+d+",outerText="+f+">";s.push(p)}}e.daemon.DoWebSealVerify(s.join("<UTCSplit|>"),t.data,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})}e.errorcallback(t,a,n,i)})},t.Envelope=function(t){"file"===t.type?e.Envelope.prototype.File(t):e.Envelope.prototype.Msg(t)},t.EnvelopMsg=function(t){e.Envelope.prototype.Msg(t)},t.EnvelopFile=function(t){e.Envelope.prototype.File(t)},t.Envelope.prototype.File=function(t){var a,n;"SM4"===t.basealg?(a="SM2",n="1.2.840.113549.3.4"):(t.basealg,a="RSA",n="1.2.840.113549.3.4"),"undefined"===typeof t.suf&&(t.suf="enc"),e.daemon.EncryptFileCMSEnvelopeEx_ByCert(t.base,a,t.path,t.path+"."+t.suf,n,function(a,n,i){"success"===a&&t.success(t.path+"."+t.suf),e.errorcallback(t,a,n,i)})},t.Envelope.prototype.Msg=function(t){var a,n;"SM4"===t.basealg?(a="SM2",n="1.2.840.113549.3.4"):(t.basealg,a="RSA",n="1.2.840.113549.3.4"),e.daemon.EncryptMsgCMSEnvelopeEx_ByCert(t.data,t.base,a,n,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.EnvelopMsgByKey=function(t){e.daemon.EnvelopMsgByKey(t.data,t.dn,t.alg,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.EnvelopFileByCer=function(t){e.daemon.EnvelopFileByCer(t.path,t.certinfo,t.outpath,t.alg,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.EnvelopFileByKey=function(t){e.daemon.EnvelopFileByKey(t.path,t.dn,t.outpath,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.DecEnvelopedMsg=function(t){e.daemon.DecEnvelopedMsg(t.data,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.DecEnvelopedFile=function(t){e.daemon.DecEnvelopedFile(t.path,t.outpath,t.symkey,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.GetPdfStdSealDataByKey=function(t){e.daemon.GetPdfStdSealDataByKey(t.hash,t.dn,t.pin,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.GetPdfStdSealDataByPfx=function(t){e.daemon.GetPdfStdSealDataByPfx(t.hash,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.DoPdfStdSealByKeyAtPos=function(t){e.daemon.DoPdfStdSealByKeyAtPos(t.path,t.dn,t.pin,t.seal,t.page,t.x,t.y,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.DoPdfStdSealByKeyAtKw=function(t){e.daemon.DoPdfStdSealByKeyAtKw(t.path,t.dn,t.pin,t.seal,t.kw,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.DoWordStdSealByKeyAtPos=function(t){e.daemon.DoWordStdSealByKeyAtPos(t.path,t.page,t.x,t.y,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.DoExcelStdSealByKeyAtPos=function(t){e.daemon.DoExcelStdSealByKeyAtPos(t.path,t.page,t.x,t.y,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.GetLocalCert=function(t){e.daemon.GetLocalCert(function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.VerifySeal=function(t){e.daemon.VerifySeal(t.path,function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.GetKeyCount=function(t){e.daemon.GetKeyCount(function(a,n,i){"success"===a&&t.success(i),e.errorcallback(t,a,n,i)})},t.ApiInit=function(){e=this}}function UTCMiddleWare_Tool(){var e=this;e.loadcss=function(e,t){if(!e||0===e.length)throw new Error('argument "path" is required !');for(var a=!0,n=0;n<document.querySelectorAll("script").length;n++)document.querySelectorAll("script")[n].src.indexOf(e)>=0&&(a=!1);if(a){var i=document.getElementsByTagName("head")[0],o=document.createElement("link");o.href=e,o.rel="stylesheet",o.type="text/css",i.appendChild(o);var s=document.createElement("script");s.onload=s.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{t()}catch(e){}s.onload=s.onreadystatechange=null}}else try{t()}catch(r){}},e.loadjs=function(e,t){if(!e||0===e.length)throw new Error('argument "path" is required !');for(var a=!0,n=0;n<document.querySelectorAll("script").length;n++)document.querySelectorAll("script")[n].src.indexOf(e)>=0&&(a=!1);if(a){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=e,o.type="text/javascript",i.appendChild(o),o.onload=o.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{t(!0)}catch(e){}o.onload=o.onreadystatechange=null},o.onerror=function(){try{t(!1)}catch(e){}}}else try{t(!0)}catch(s){}},e.typearray=function(e){for(var t,a=navigator.userAgent,n=a.split(" "),i=!1,o=0;o<n.length;o++){var s=n[o];RegExp(e).test(s)&&(i=!0,t=o)}return{type:i,num:t}},e.Ie7=function(){var t=navigator.userAgent,a=t.split(" ");if(e.typearray("MSIE").type){var n=e.typearray("MSIE").num,i=/^\d+\.\d+/,o=i.exec(a[n+1].replace(/[^0-9.]/gi,""));return UTCMiddleWare.vnum=i.exec(a[n+1].replace(/[^0-9.]/gi,"")),o<8}},e.Browser=function(){var e=navigator.userAgent;return e.indexOf("Firefox")>=0?"Firefox":e.indexOf("Edge")>=0?"Edge":e.indexOf("Trident")>=0?"IE":e.indexOf("Opera")>=0?"Opera":e.indexOf("Chrome")>=0?"Chrome":e.indexOf("Safari")>=0?"Safari":"Other"},e.randomnum=function(e){for(var t="",a=1;a<=e;a++){var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],i=new Date,o=Math.floor(i.getMilliseconds()/1e3*16);t+=n[o]}return t},e.endWith=function(e,t){return!(null===t||""===t||0===e.length||t.length>e.length)&&e.substring(e.length-t.length)===t},e.fromBase64=function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(new ArrayBuffer(a)),i=0;i<a;i++)n[i]=t.charCodeAt(i);return n}}function UTCMiddleWare_Daemon(){var e=this,t=UTCMiddleWare;e.PluginVersion=function(e){UTCMiddleWare.LocalAjaxPost({function:"PluginVersion",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetAuxCtlVer=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetAuxCtlVer",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetKeyHWInfos=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetKeyHWInfos",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetAEKeyID=function(e){UTCMiddleWare.LocalAjaxPost({function:"getKeyID",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.getKeyCert=function(e){UTCMiddleWare.LocalAjaxPost({function:"getCert",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetLocalCert=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetLocalCertDn",value:{proID:t.code}},function(t,a,n){e(t,a,n)})},e.GetLocalFilePath=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"GetLocalFilePath",value:{proID:t.code}},function(e,t,n){a(e,t,n)})},e.OpenEKey=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"ChkKeyPin",value:{pin:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.ChangePIN=function(e,a,n){UTCMiddleWare.LocalAjaxPost({function:"ChangePin",value:{oPin:e,nPin:a,proID:t.code}},function(e,t,a){n(e,t,a)})},e.SignString=function(e,a,n,i,o,s,r){UTCMiddleWare.LocalAjaxPost({function:"SignMsg",value:{pin:e,data:i,dn:a||"",hashAlg:o,proID:t.code}},function(e,t,a){r(e,t,a)})},e.SignStringDetach=function(e,a,n,i,o,s,r){UTCMiddleWare.LocalAjaxPost({function:"SignMsgDetached",value:{pin:e,data:i,dn:a||"",hashAlg:o,proID:t.code}},function(e,t,a){r(e,t,a)})},e.VerifyString=function(e,a,n,i,o){UTCMiddleWare.LocalAjaxPost({function:"VerifyMsg",value:{signVal:a,proID:t.code}},function(e,t,a){o(e,t,a)})},e.VerifyStringDetach=function(e,a,n,i,o){UTCMiddleWare.LocalAjaxPost({function:"VerifyMsgDetached",value:{signVal:a,data:e,proID:t.code}},function(e,t,a){o(e,t,a)})},e.DoSignFile=function(e,a,n,i,o){UTCMiddleWare.LocalAjaxPost({function:"SignFileDetachedToMsg",value:{pin:e,srcFile:n,dn:a||"",hashAlg:i,proID:t.code}},function(e,t,a){o(e,t,a)})},e.DoSignFile2=function(e,a,n,i,o,s){UTCMiddleWare.LocalAjaxPost({function:"SignFile",value:{pin:e,srcFile:n,outFile:o,dn:a||"",hashAlg:i,proID:t.code}},function(e,t,a){s(e,t,a)})},e.EncSignFile=function(e,t,a,n,i,o,s){UTCMiddleWare.LocalAjaxPost({function:"EncSignFile",value:{srcFile:e,certInfo:t,encAlg:a,outFile:n,dn:i,hashAlg:o}},function(e,t,a){s(e,t,a)})},e.VerifyFileSign=function(e,a,n,i){UTCMiddleWare.LocalAjaxPost({function:"VerifyFileDetached",value:{signVal:e,srcFile:n,proID:t.code}},function(e,t,a){i(e,t,a)})},e.VerifyFilesSign=function(e,a,n){UTCMiddleWare.LocalAjaxPost({function:"VerifyFileDetached",value:{signValFile:a,srcFiles:e,proID:t.code}},function(e,t,a){n(e,t,a)})},e.EncryptMsgCMSEnvelopeEx_ByCert=function(e,a,n,i,o){var s=a.replace(/=/gi,"#");UTCMiddleWare.LocalAjaxPost({function:"EnvelopMsg",value:{data:e,certInfo:s,encAlg:i,proID:t.code}},function(e,t,a){o(e,t,a)})},e.EncryptFileCMSEnvelopeEx_ByCert=function(e,a,n,i,o,s){var r=e.replace(/=/gi,"#");UTCMiddleWare.LocalAjaxPost({function:"EnvelopFile",value:{srcFile:n,outFile:i,certInfo:r,encAlg:o,proID:t.code}},function(e,t,a){s(e,t,a)})},e.EnvelopMsgByKey=function(e,a,n,i){UTCMiddleWare.LocalAjaxPost({function:"EnvelopMsgByKey",value:{data:e,dn:a,encAlg:n,proID:t.code}},function(e,t,a){i(e,t,a)})},e.EnvelopFileByCer=function(e,a,n,i,o){UTCMiddleWare.LocalAjaxPost({function:"EnvelopFileByCer",value:{srcFile:e,certinfo:a,outFile:n,encAlg:i,proID:t.code}},function(e,t,a){o(e,t,a)})},e.EnvelopFileByKey=function(e,a,n,i){UTCMiddleWare.LocalAjaxPost({function:"EnvelopFileByKey",value:{srcFile:e,dn:a,outFile:n,proID:t.code}},function(e,t,a){i(e,t,a)})},e.DecEnvelopedMsg=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"DecEnvelopedMsg",value:{strSymKeyEnvelope:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.DecEnvelopedFile=function(e,a,n,i){UTCMiddleWare.LocalAjaxPost({function:"DecEnvelopedFile",value:{encFile:e,decFile:a,strSymKeyEnvelope:n,proID:t.code}},function(e,t,a){i(e,t,a)})},e.DoWebSealByEKey=function(e,a,n,i,o,s){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealByEKey",value:{dn:e,password:a,boundID:n,boundVal:i,dataID:o,proID:t.code}},function(e,t,a){s(e,t,a)})},e.DoWebSealGetBoundId=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealGetBoundId",value:{sealinfo:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.DoWebSealVerify=function(e,a,n){UTCMiddleWare.LocalAjaxPost({function:"DoWebSealVerify",value:{val:e,sealinfo:a,proID:t.code}},function(e,t,a){n(e,t,a)})},e.GetPdfStdSealDataByKey=function(e,a,n,i){UTCMiddleWare.LocalAjaxPost({function:"GetPdfStdSealDataByKey",value:{fileAbs:e,pwd:n,keyDn:a,proID:t.code}},function(e,t,a){i(e,t,a)})},e.GetPdfStdSealDataByPfx=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"GetPdfStdSealDataByPfx",value:{fileAbs:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.DoPdfStdSealByKeyAtPos=function(e,a,n,i,o,s,r,l){UTCMiddleWare.LocalAjaxPost({function:"DoPdfStdSealByKeyAtPos",value:{sourceFile:e,pinCode:n,dnName:a,imgBase64:i,pageNo:o,xPosition:s,yPosition:r,proID:t.code}},function(e,t,a){l(e,t,a)})},e.DoPdfStdSealByKeyAtKw=function(e,a,n,i,o,s){UTCMiddleWare.LocalAjaxPost({function:"DoPdfStdSealByKeyAtKw",value:{sourceFile:e,pinCode:n,dnName:a,imgBase64:i,charString:o,proID:t.code}},function(e,t,a){s(e,t,a)})},e.DoWordStdSealByKeyAtPos=function(e,a,n,i,o){UTCMiddleWare.LocalAjaxPost({function:"DoSealInWordByCoord",value:{sSourceFile:e,xPosition:n,yPosition:i,pageNo:a,proID:t.code}},function(e,t,a){o(e,t,a)})},e.DoExcelStdSealByKeyAtPos=function(e,a,n,i,o){UTCMiddleWare.LocalAjaxPost({function:"DoSealInExcelByCoord",value:{sSourceFile:e,xPosition:n,yPosition:i,pageNo:a,proID:t.code}},function(e,t,a){o(e,t,a)})},e.GetEKeyPic=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"GetSealImage",value:{pin:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.VerifySeal=function(e,a){UTCMiddleWare.LocalAjaxPost({function:"VerifySeal",value:{pdfFile:e,proID:t.code}},function(e,t,n){a(e,t,n)})},e.GetKeyCount=function(e){UTCMiddleWare.LocalAjaxPost({function:"GetKeyCount",value:{proID:t.code}},function(t,a,n){e(t,a,n)})}}UTCMiddleWare_Function.prototype=new UTCMiddleWare_Api;var UTCMiddleWare=new UTCMiddleWare_Function;UTCMiddleWare.Initialize(),__webpack_exports__["a"]=UTCMiddleWare},2:function(e,t){},"2b2d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchPdf}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.patchSignPosition}},[e._v("按位置批签")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.patchSignKeyWord}},[e._v("按关键字批签")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.verifySignFiles}},[e._v("批量验签")])],1)]),e._v(" "),a("el-main",[a("el-table",{staticStyle:{width:"100%","line-height":"20px"},attrs:{data:e.pdfList,size:"small",height:"calc(100vh - 198px)",border:""},on:{"selection-change":e.changeFun}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileId",label:"文件id",width:"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastTime",label:"时间","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileSize",label:"文件大小","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hasSign",label:"是否已签章","min-width":"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",width:"190",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.signSingleM(t)}}},[e._v("签章")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"line-height":"2px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,30,40],"page-size":e.queryParam.pageInfo.size,layout:"total, sizes, prev, pager, next, jumper",total:e.queryParam.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新一代交易平台电子签章",visible:e.dialogSingleShow,width:"95%",top:"5px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogSingleShow=t}}},[a("iframe",{ref:"child",attrs:{src:e.iframePdf,width:e.iframeWidth,height:e.iframeHigh,frameborder:"0"}})]),e._v(" "),a("el-dialog",{attrs:{title:"按位置单签",visible:e.dialogSinglePos,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogSinglePos=t}}},[a("el-form",{ref:"singlePositionParam",attrs:{model:e.singlePositionParam,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:""},model:{value:e.singlePositionParam.pin,callback:function(t){e.$set(e.singlePositionParam,"pin",t)},expression:"singlePositionParam.pin"}})],1)],1),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.singlePosSignSure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"按位置批签",visible:e.dialogPositionVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogPositionVisible=t}}},[a("el-form",{ref:"patchPositionParam",attrs:{model:e.patchPositionParam,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"签署类型",prop:"signType"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署类型"},model:{value:e.patchPositionParam.signType,callback:function(t){e.$set(e.patchPositionParam,"signType",t)},expression:"patchPositionParam.signType"}},[a("el-option",{attrs:{label:"签名",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签章",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:""},model:{value:e.patchPositionParam.pin,callback:function(t){e.$set(e.patchPositionParam,"pin",t)},expression:"patchPositionParam.pin"}})],1)],1),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.positionSignSure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"按关键字单签",visible:e.dialogKeywordSingleVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogKeywordSingleVisible=t}}},[a("el-form",{ref:"singleKeywordParam",attrs:{model:e.singleKeywordParam,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:"请输入关键字"},model:{value:e.singleKeywordParam.keyword,callback:function(t){e.$set(e.singleKeywordParam,"keyword",t)},expression:"singleKeywordParam.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"偏移方位",prop:"isDeviation"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择相对于关键字偏移方位"},model:{value:e.singleKeywordParam.isDeviation,callback:function(t){e.$set(e.singleKeywordParam,"isDeviation",t)},expression:"singleKeywordParam.isDeviation"}},[a("el-option",{attrs:{label:"不偏移",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"向上偏移",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"向下偏移",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"向左偏移",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"向右偏移",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"签署类型",prop:"signType"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署类型"},model:{value:e.singleKeywordParam.signType,callback:function(t){e.$set(e.singleKeywordParam,"signType",t)},expression:"singleKeywordParam.signType"}},[a("el-option",{attrs:{label:"签名",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签章",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"签署位置",prop:"signMode"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署第几个关键字"},model:{value:e.singleKeywordParam.signMode,callback:function(t){e.$set(e.singleKeywordParam,"signMode",t)},expression:"singleKeywordParam.signMode"}},[a("el-option",{attrs:{label:"签署第一个关键字",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签署最后一个关键字",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"签署所有关键字",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"签署第二个关键字",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{"show-password":"",placeholder:"请输入PIN码"},model:{value:e.singleKeywordParam.pin,callback:function(t){e.$set(e.singleKeywordParam,"pin",t)},expression:"singleKeywordParam.pin"}})],1)],1),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.keywordSingleSignSure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"按关键字批签",visible:e.dialogKeywordVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogKeywordVisible=t}}},[a("el-form",{ref:"patchKeywordParam",attrs:{model:e.patchKeywordParam,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:"请输入关键字"},model:{value:e.patchKeywordParam.keyword,callback:function(t){e.$set(e.patchKeywordParam,"keyword",t)},expression:"patchKeywordParam.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"偏移方位",prop:"isDeviation"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择相对于关键字偏移方位"},model:{value:e.patchKeywordParam.isDeviation,callback:function(t){e.$set(e.patchKeywordParam,"isDeviation",t)},expression:"patchKeywordParam.isDeviation"}},[a("el-option",{attrs:{label:"不偏移",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"向上偏移",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"向下偏移",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"向左偏移",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"向右偏移",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"签署类型",prop:"signType"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署类型"},model:{value:e.patchKeywordParam.signType,callback:function(t){e.$set(e.patchKeywordParam,"signType",t)},expression:"patchKeywordParam.signType"}},[a("el-option",{attrs:{label:"签名",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签章",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"签署位置",prop:"signMode"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择签署第几个关键字"},model:{value:e.patchKeywordParam.signMode,callback:function(t){e.$set(e.patchKeywordParam,"signMode",t)},expression:"patchKeywordParam.signMode"}},[a("el-option",{attrs:{label:"签署第一个关键字",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"签署最后一个关键字",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"签署所有关键字",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"签署第二个关键字",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PIN码",prop:"pin"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{"show-password":"",placeholder:"请输入PIN码"},model:{value:e.patchKeywordParam.pin,callback:function(t){e.$set(e.patchKeywordParam,"pin",t)},expression:"patchKeywordParam.pin"}})],1)],1),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("请输入UKey的PIN码")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.keywordSignSure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.progressVisible,width:"20%","before-close":e.handleClose,align:"center"},on:{"update:visible":function(t){e.progressVisible=t}}},[100!==e.singlePercentage.percentage?a("el-progress",{attrs:{type:"circle",percentage:e.singlePercentage.percentage}}):e._e(),e._v(" "),100===e.singlePercentage.percentage?a("el-progress",{attrs:{type:"circle",percentage:e.singlePercentage.percentage,status:"success"}}):e._e()],1)],1)},i=[],o=(a("ac6a"),a("5df3"),a("f400"),a("d225")),s=a("b0b4"),r=a("b775"),l=function(){function e(){Object(o["a"])(this,e)}return Object(s["a"])(e,null,[{key:"querySeals",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealManage/querySeals",method:"post",data:e})}},{key:"queryScene",value:function(){return Object(r["a"])({url:"/px-common-signature/searchScene/queryScene",method:"post"})}},{key:"changeStatus",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealManage/updateStatus",method:"post",data:e})}},{key:"sealStart",value:function(){return Object(r["a"])({url:"/px-common-signature/pdfView",method:"post"})}},{key:"getPdfList",value:function(e){return Object(r["a"])({url:"/px-common-signature/getPdfList",method:"post",data:e})}},{key:"verifySignFiles",value:function(e){return Object(r["a"])({url:"/px-common-signature/verifySignFiles",method:"post",data:e})}}]),e}(),c=(a("ac4d"),a("8a81"),a("1fa89")),u=a("5c96"),d=function(){function e(){Object(o["a"])(this,e)}return Object(s["a"])(e,null,[{key:"patchPositionOrKeyword",value:function(t,a,n){console.log("获取的值为:"+t),console.log("检测钥匙Pin码，事件绑定成功");var i={fileIds:t.selectFileIds};e.downloadFilesByIds(i).then(function(e){console.log("文件下载成功")});var o,s=t.signType,r=t.pin,l=t.selectFiles;console.log("转化后的值为"+l);var u="{",d=!0,f=!1,p=void 0;try{for(var g,h=l.entries()[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var y=g.value;u=u+'"'+y[0]+'":"'+y[1]+'",'}}catch(K){f=!0,p=K}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}u=u.substr(0,u.length-1)+"}",console.log("拼接后字符串为:"+u);var m,v,_,P,S,b,w,M,D=new Map,I=[],x=[];void 0===t.keyword?(b=t.patchPosition.p,w=t.patchPosition.x,M=t.patchPosition.y):(_=t.keyword,P=t.signMode,S=t.isDeviation),console.log("进入签章方法"+s+":"+w+":"+M+":"+b);var k=new Promise(function(t){c["a"].OpenKey({pin:r,success:function(n){console.log("pin码正确"),c["a"].GetCertInfo({success:function(e){console.log(JSON.stringify(e));var t=JSON.stringify(e),a=new Function("return"+t)();m=a[0].DN,console.log(m)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}});var i=new Promise(function(t){c["a"].GetSealInfo({pin:r,success:function(n){var i=null;"1"===s?o="11":"0"===s&&(o="12");for(var l=0;l<n.length;l++)if(n[l].id===o){i=n[l].value;break}if(void 0===_||null===_||""===_){var c={x:w,y:M,sealInfoBase64:i,strReason:"",strLocation:"",fileInfos:{fileInfos:u},pageNo:b},d=new Promise(function(t){e.getPdfStdDigests(c).then(function(n){if(0===n.status){v=n.data;var i=new Promise(function(t){a.percentage=66,e.patchSign(D,x,I,v,r,m,a).then(function(e){t(e)})});t(i)}else e.failMessage("获取摘要信息，接口调用失败")})});t(d)}else{var f,p;if(void 0!==S&&null!=S)switch(S){case"0":f=0,p=0;break;case"1":f=0,p=-16;break;case"2":f=0,p=8;break;case"3":f=-10,p=0;break;case"4":f=10,p=0;break;default:f=0,p=0;break}else f=0,p=0;var g={x:f,y:p,sealInfoBase64:i,strReason:"",strLocation:"",fileInfos:{fileInfos:u},keyStr:_,signMode:P},h=new Promise(function(t){e.getPdfStdDigestOnKws(g).then(function(n){if(0===n.status){v=n.data;var i=new Promise(function(t){a.percentage=66,e.patchSign(D,x,I,v,r,m,a).then(function(e){t(e)})});t(i)}else e.failMessage("获取摘要信息，接口调用失败")})});t(h)}},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});t(i)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});return k}},{key:"signPdf",value:function(t,a,n,i,o,s,r){c["a"].GetPdfStdSealDataByKey({hash:n,dn:i,pin:o,success:function(n){var i={fileName:a,signInfo:n};e.sealStdPdfReturnByte(i).then(function(n){if(0===n.status)if(0===n.data.status){var i={fileId:t,fileName:a,message:"文件签章成功",signFileId:n.data.data};s.push(i)}else{var o={fileId:t,fileName:a,message:n.data.message};r.push(o)}else{var l={fileId:t,fileName:a,message:"生成签章数据接口调用失败"};r.push(l),e.failMessage("生成签章数据接口调用失败")}}).catch(function(e){console.log("阻止事件冒泡"+e);var n={fileId:t,fileName:a,message:e};r.push(n)}).then(function(e){console.log(e),console.log("阻止promise冒泡")})},fail:function(n){var i={fileId:t,fileName:a,message:n};r.push(i),e.failMessage(n)},error:function(n){var i={fileId:t,fileName:a,message:n};r.push(i),e.errorMessage(n)}})}},{key:"getPdfStdDigests",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealOperator/getPdfStdDigests",method:"post",data:e})}},{key:"getPdfStdDigestOnKws",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealOperator/getPdfStdDigestOnKws",method:"post",data:e})}},{key:"sealStdPdfReturnByte",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealOperator/sealStdPdfReturnByte",method:"post",data:e})}},{key:"patchSign",value:function(t,a,n,i,o,s,r){for(var l=0,c=0;c<=i.length;c++){var u=void 0,d=void 0,f=void 0;if(l+=1,c!==i.length){if(!0!==i[c].digestStatus){var p={fileId:i[c].fileId,fileName:i[c].fileName,message:i[c].digest};a.push(p);continue}u=i[c].digest,d=i[c].fileName,f=i[c].fileId,e.signPdf(f,d,u,s,o,n,a)}}if(l>=i.length+1)return r.percentage=100,setTimeout(function(){},2e3),new Promise(function(e){t.set("success",n),t.set("error",a),e(t)})}},{key:"failMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"errorMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"downloadFilesByIds",value:function(e){return Object(r["a"])({url:"/px-common-signature/downloadFilesByIds",method:"post",data:e})}}]),e}(),f=function(){function e(){Object(o["a"])(this,e)}return Object(s["a"])(e,null,[{key:"singleSignPosition",value:function(t,a,n){console.log("检测钥匙Pin码，事件绑定成功");var i,o,s,r,l=t.signType,u=t.singlePosition.xPos,d=t.singlePosition.yPos,f=t.singlePosition.pageNum,p=t.pin,g=t.fileName,h=t.fileId;console.log(u+":"+d+":"+f);var y=new Promise(function(t){c["a"].OpenKey({pin:p,success:function(){a.percentage=20,console.log("pin码正确"),c["a"].GetCertInfo({success:function(e){console.log(JSON.stringify(e));var t=JSON.stringify(e),a=new Function("return"+t)();s=a[0].DN,console.log(s)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}});var n=new Promise(function(t){c["a"].GetSealInfo({pin:p,success:function(n){a.percentage=50;var y=null;"1"===l?i="11":"0"===l&&(i="12");for(var m=0;m<n.length;m++)if(n[m].id===i){y=n[m].value;break}var v={x:u,y:d,sealInfoBase64:y,strReason:"",strLocation:"",fileName:g,pageNo:f},_=new Promise(function(t){e.getPdfStdDigest(v).then(function(n){if(0===n.status){r=n.data,a.percentage=75;var i=new Promise(function(t){c["a"].GetPdfStdSealDataByKey({hash:r,dn:s,pin:p,success:function(n){var i={fileName:g,signInfo:n},s=new Promise(function(t){e.sealStdPdfReturn(i,h,g,o,a).then(function(e){t(e)})});t(s)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});t(i)}else e.failMessage("获取摘要信息，接口调用失败")})});t(_)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});t(n)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});return y}},{key:"singleSignKeyword",value:function(t,a,n){var i,o,s,r,l=t.signType,u=t.fileId,d=t.fileName,f=t.keyword,p=t.isDeviation,g=t.signMode,h=t.pin,y=new Promise(function(t){c["a"].OpenKey({pin:h,success:function(){a.percentage=20,console.log("pin码正确"),c["a"].GetCertInfo({success:function(e){console.log(JSON.stringify(e));var t=JSON.stringify(e),a=new Function("return"+t)();o=a[0].DN,console.log(o)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}});var n=new Promise(function(t){c["a"].GetSealInfo({pin:h,success:function(n){a.percentage=50;var y=null;"1"===l?s="11":"0"===l&&(s="12");for(var m=0;m<n.length;m++)if(n[m].id===s){y=n[m].value;break}var v=0,_=0;if(void 0!==p&&null!=p)switch(p){case"0":v=0,_=0;break;case"1":v=0,_=-16;break;case"2":v=0,_=8;break;case"3":v=-10,_=0;break;case"4":v=10,_=0;break;default:v=0,_=0;break}var P={x:v,y:_,sealInfoBase64:y,strReason:"",strLocation:"",fileName:d,keyStr:f,signMode:g},S=new Promise(function(t){e.getPdfStdDigestOnKw(P).then(function(n){if(0===n.status){r=n.data,a.percentage=75;var s=new Promise(function(t){c["a"].GetPdfStdSealDataByKey({hash:r,dn:o,pin:h,success:function(n){var o={fileName:d,signInfo:n},s=new Promise(function(t){e.sealStdPdfReturn(o,u,d,i,a).then(function(e){t(e)})});t(s)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});t(s)}else e.failMessage("获取摘要信息，接口调用失败")})});t(S)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});t(n)},fail:function(t){e.failMessage(t)},error:function(t){e.errorMessage(t)}})});return y}},{key:"getPdfStdDigest",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealOperator/getPdfStdDigest",method:"post",data:e})}},{key:"getPdfStdDigestOnKw",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealOperator/getPdfStdDigestOnKw",method:"post",data:e})}},{key:"sealStdPdfReturnByte",value:function(e){return Object(r["a"])({url:"/px-common-signature/signSealOperator/sealStdPdfReturnByte",method:"post",data:e})}},{key:"failMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"errorMessage",value:function(e){Object(u["Message"])({message:"失败，原因："+e,type:"error",duration:2e3,center:!0})}},{key:"sealStdPdfReturn",value:function(t,a,n,i,o){return new Promise(function(s){e.sealStdPdfReturnByte(t).then(function(t){return 0===t.status?0===t.data.status?(o.percentage=100,o.signStatus="success",Object(u["Message"])({message:"签章成功",type:"success",duration:2e3,center:!0}),new Promise(function(e){i={fileId:a,fileName:n,status:0,message:"签章成功",signFileId:t.data.data},e(i)})):(e.failMessage(t.data.message),new Promise(function(e){i={fileId:a,fileName:n,status:1,message:t.data.message,signFileId:""},e(i)})):(e.failMessage("生成签章数据接口调用失败"),new Promise(function(e){i={fileId:a,fileName:n,status:1,message:"生成签章数据接口调用失败",signFileId:""},e(i)}))})})}}]),e}(),p={fileId:"",fileName:"",lastTime:"",fileSize:"",hasSign:""},g={name:"Approval",data:function(){return{dialogPositionVisible:!1,dialogSinglePos:!1,progressVisible:!1,singlePercentage:{percentage:0,signStatus:""},dialogSingleShow:!1,dialogKeywordVisible:!1,dialogKeywordSingleVisible:!1,passForm:!1,iframeWidth:"",iframeHigh:"",iframePdf:"",baseURL:"http://192.100.2.64:19252",signSingle:Object.assign({},p),pdfList:[],currentPage:1,queryParam:{data:{fileIds:["09027101bf6d952cc7f74c97b9a7bcdf2dc90f1f","0902710137b29bf55ddf4a36ae02a53498ff579e","09027101bf6d952cc7f74c97b9a7bcdf2dc90f1f"]},pageInfo:{pageNum:1,pageSize:2,size:0,startRow:1,endRow:1,pages:0,prePage:0,nextPage:0,isFirstPage:!0,isLastPage:!0,hasPreviousPage:!1,navigatePages:0,navigatepageNums:[],navigateFirstPage:1,navigateLastPage:1,total:0}},selectList:[],singlePositionParam:{singlePosition:{},signType:"",pin:"",fileId:"",fileName:""},patchPositionParam:{selectFiles:new Map,selectFileIds:[],patchPosition:{},signType:"",pin:""},singleKeywordParam:{fileId:"",fileName:"",keyword:"",isDeviation:"",signMode:"",signType:"",pin:""},patchKeywordParam:{selectFiles:new Map,selectFileIds:[],keyword:"",isDeviation:"",signMode:"",signType:"",pin:""}}},watch:{},mounted:function(){this.queryPage(this.queryParam),window.addEventListener("message",this.handleMessage)},methods:{handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.queryParam.pageInfo.pageSize=e,this.queryPage(this.queryParam)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.queryParam.pageInfo.pageNum=e-1,this.queryPage(this.queryParam)},queryPage:function(e){var t=this;l.getPdfList(e).then(function(e){t.pdfList=e.data.list,t.queryParam.pageInfo=e.data})},searchPdf:function(){this.queryPage(this.queryParam)},handleClose:function(e){e()},signSingleM:function(e){e.$index;var t=e.row;console.log(t.fileId);var a=t.fileId;this.singlePositionParam.fileName=t.fileName,this.singlePositionParam.fileId=t.fileId,this.singleKeywordParam.fileName=t.fileName,this.singleKeywordParam.fileId=t.fileId,this.dialogSingleShow=!0,this.iframePdf=this.baseURL+"/px-common-signature/pdfView?fileId="+a;var n=document.body.scrollWidth,i=document.body.scrollHeight;n<985&&(n=985),this.iframeWidth=.9*n,this.iframeHigh=.78*i},patchSignPosition:function(){var e="";if(null!=this.selectList&&0!==this.selectList.length){e=this.selectList[0].fileId,this.dialogSingleShow=!0,this.iframePdf=this.baseURL+"/px-common-signature/pdfView?fileId="+e+"&type=pSign";var t=document.body.scrollWidth,a=document.body.scrollHeight;t<985&&(t=985),this.iframeWidth=.9*t,this.iframeHigh=.78*a}else this.$message({type:"error",message:"未选择要批签的文件!"})},patchSignKeyWord:function(){this.dialogKeywordVisible=!0},changeFun:function(e){this.selectList=e},handleMessage:function(e){var t=e.data;switch(t.cmd){case"singleSignPosition":console.log("单签位置"),!0===t.params.success&&(this.singlePositionParam.signType=t.params.data.signType,this.singlePositionParam.singlePosition={xPos:t.params.data.x,yPos:t.params.data.y,pageNum:t.params.data.p},this.dialogSinglePos=!0);break;case"returnPosition":console.log("按位置批签位置"),!0===t.params.success&&(this.dialogSingleShow=!1,this.dialogPositionVisible=!0,this.patchPositionParam.patchPosition=t.params.data,console.log(this.patchPositionParam.patchPosition));break;case"singleSignKeyword":console.log("按关键字单签"),!0===t.params.success&&(this.dialogKeywordSingleVisible=!0)}},positionSignSure:function(){var e=this;this.patchPositionParam.selectFiles=new Map,console.log("签章位置"+this.patchPositionParam.patchPosition);for(var t=0;t<this.selectList.length;t++)this.patchPositionParam.selectFiles.set(this.selectList[t].fileId,this.selectList[t].fileName),this.patchPositionParam.selectFileIds.push(this.selectList[t].fileId);console.log("待签章的文件为:"+JSON.stringify(this.patchPositionParam.selectFiles)),console.log(this.patchPositionParam.selectFileIds),this.progressVisible=!0,d.patchPositionOrKeyword(this.patchPositionParam,this.singlePercentage).then(function(t){console.log(t),console.log(t.get("success")),console.log(t.get("error")),e.dialogPositionVisible=!1,e.resetForm("patchPositionParam")})},keywordSignSure:function(){var e=this;this.patchKeywordParam.selectFiles=new Map;for(var t=0;t<this.selectList.length;t++)this.patchKeywordParam.selectFiles.set(this.selectList[t].fileId,this.selectList[t].fileName),this.patchKeywordParam.selectFileIds.push(this.selectList[t].fileId);console.log("文件"+this.patchKeywordParam.selectFiles),console.log(this.patchPositionParam.selectFileIds),d.patchPositionOrKeyword(this.patchKeywordParam,this.singlePercentage).then(function(t){console.log(t),console.log(t.get("success")),console.log(t.get("error")),e.dialogKeywordVisible=!1,e.resetForm("patchKeywordParam")})},resetForm:function(e){this.$refs[e].resetFields()},singlePosSignSure:function(){var e=this;this.progressVisible=!0,f.singleSignPosition(this.singlePositionParam,this.singlePercentage).then(function(t){console.log("进入"),console.log(t),e.progressVisible=!1,e.resetForm("singlePositionParam")})},keywordSingleSignSure:function(){this.progressVisible=!0,f.singleSignKeyword(this.singleKeywordParam,this.singlePercentage).then(function(e){console.log(e)})},verifySignFiles:function(){var e={fileIds:["090271012a59e07ac991489bb8e30a06f56a0ca5","090271012a59e07ac991489bb8e30a06f56a0ca5","090271012a59e07ac991489bb8e30a06f56a0ca5"]};l.verifySignFiles(e).then(function(e){console.log(e)})}}},h=g,y=(a("2d3c"),a("2877")),m=Object(y["a"])(h,n,i,!1,null,"3e437f88",null);t["default"]=m.exports},"2d3c":function(e,t,a){"use strict";var n=a("cb8c"),i=a.n(n);i.a},3:function(e,t){},"4bf8d":function(e,t,a){"use strict";a("6b54"),a("ac6a"),a("75fc"),a("34ef"),a("1146");a("0fd4")},cb8c:function(e,t,a){}}]);